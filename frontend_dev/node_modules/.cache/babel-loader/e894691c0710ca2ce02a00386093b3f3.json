{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/admin/Downloads/code/dajia/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _asyncToGenerator from\"/Users/admin/Downloads/code/dajia/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/admin/Downloads/code/dajia/frontend/node_modules/@babel/runtime/regenerator/index.js\";import{banch_index,backend,year_performance,insert_banch_table,updata_performance_table}from\"../api\";export function check_and_recatch_data(_x,_x2,_x3){return _check_and_recatch_data.apply(this,arguments);}function _check_and_recatch_data(){_check_and_recatch_data=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(token,synchronize_update,sec){var result1,result2,result3;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return banch_index(token);case 2:result1=_context.sent;_context.next=5;return backend(token);case 5:result2=_context.sent;_context.next=8;return year_performance(token);case 8:result3=_context.sent;synchronize_update(true);//設定同步頁面開始\nsetTimeout(function(){if(result1===true&&result2===true&&result3===true){//代表資料已經更新\nsynchronize_update(false);//設定同步頁面結束\nreturn true;}return false;},sec);case 11:case\"end\":return _context.stop();}}},_callee);}));return _check_and_recatch_data.apply(this,arguments);};export function search(arr,item_index,new_item,reCatchData,synchronize_update){//reCatchData=reCatchData.current\n// arr 原陣列 ,,  item_index 更新的資料所在的畫面位置  ,,  new_item 更新的資料\n// function search 把原先的陣列 要更新的資料刪除 之後 加入更新的資料\nvar list=[];var temp=[];var count=0;console.log('-----------------------------------');console.log('arr 原陣列',arr);console.log('item_index 要更新的位置',item_index);console.log('new_item 新的資料',new_item);for(var data=0;data<arr.length;data++){if(arr[data].length===1){//如果判斷到 陣列裡面是「’+‘」號  就不加入 跳過\n}else if(data!==item_index){list.push(arr[data]);}else{//如果跑到的data與item_index要插入的位置相等 \n//新增  並且帶入check function\nlist.push(new_item);check_arr(new_item,reCatchData,synchronize_update);}}for(var none=0;none<list.length;none++){//尋找[[],[],[]] 空字串有幾個 \ncount=0;var _iterator=_createForOfIteratorHelper(list[none]),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _data=_step.value;if(_data===''){count+=1;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}if(count<list[none].length-2){temp.push(list[none]);}}return temp;};export function update(_x4,_x5){return _update.apply(this,arguments);}function _update(){_update=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(new_item,set_new_emp){var token,result1,result2,result3,timer;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0://function update 更新 performance_per_month的資料\ntoken=window.sessionStorage.getItem('token');_context2.next=3;return updata_performance_table(new_item,token);case 3:result1=_context2.sent;_context2.next=6;return backend(token);case 6:result2=_context2.sent;_context2.next=9;return year_performance(token);case 9:result3=_context2.sent;timer=setInterval(function(){if(result1===true&&result2===true&&result3===true){set_new_emp('已儲存變更');clearInterval(timer);}},100);case 11:case\"end\":return _context2.stop();}}},_callee2);}));return _update.apply(this,arguments);}export function check_arr(_x6,_x7,_x8){return _check_arr.apply(this,arguments);}function _check_arr(){_check_arr=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(arr,reCatchData,synchronize_update){var count,token,_iterator2,_step2,data,result;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0://當資料填完整後就request api\n//arr=[帳號,密碼,名字,組別,編號,開始日期,職位權限,工作狀態]\ncount=0;token=window.sessionStorage.getItem('token');_iterator2=_createForOfIteratorHelper(arr);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){data=_step2.value;if(data!==''){count+=1;}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}if(!(count===arr.length)){_context3.next=9;break;}_context3.next=7;return insert_banch_table(token,arr);case 7:result=_context3.sent;//api\n//result?alert(`資料庫存取成功${result}`):alert(`資料庫存取失敗${result}`)\nif(result==='update'&&reCatchData===true){check_and_recatch_data(token,synchronize_update,200);//負責設定同步畫面及同步抓取資料\nreCatchData=false;//重新抓取資料狀態 否\n}case 9:case\"end\":return _context3.stop();}}},_callee3);}));return _check_arr.apply(this,arguments);};export function obj_to_arr(obj){var a=Object.values(obj).map(function(v){return v;});console.log('物件轉陣列',a);return a;};export function rule_num_letter(e){var value=e.target.value;var ascii;var return_string='';for(var num=0;num<value.length;num++){ascii=value.codePointAt(num);if(ascii>=48&&ascii<=57||ascii>=65&&ascii<=90||ascii>=97&&ascii<=122){return_string+=String.fromCharCode(ascii);}}e.target.value=return_string;return return_string;}export function rule_num(e,maxValue){var value=e.target.value;var ascii;var return_string='';for(var num=0;num<value.length;num++){ascii=value.codePointAt(num);if(ascii>=48&&ascii<=57){if(num===0&&ascii===48){continue;//跳過第一個數為0\n}return_string+=String.fromCharCode(ascii);}}return_string=parseInt(return_string.length>0?return_string:'0');//如果是空時  就替換成 '0'\nreturn_string=return_string>maxValue?maxValue:return_string;//如果出來的值大於最大值時，就把他釘在最大值\ne.target.value=return_string;return return_string;}","map":{"version":3,"sources":["/Users/admin/Downloads/code/dajia/frontend/src/page/method/method_func.js"],"names":["banch_index","backend","year_performance","insert_banch_table","updata_performance_table","check_and_recatch_data","token","synchronize_update","sec","result1","result2","result3","setTimeout","search","arr","item_index","new_item","reCatchData","list","temp","count","console","log","data","length","push","check_arr","none","update","set_new_emp","window","sessionStorage","getItem","timer","setInterval","clearInterval","result","obj_to_arr","obj","a","Object","values","map","v","rule_num_letter","e","value","target","ascii","return_string","num","codePointAt","String","fromCharCode","rule_num","maxValue","parseInt"],"mappings":"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","sourcesContent":["import { banch_index,backend,year_performance,insert_banch_table, updata_performance_table } from \"../api\"\nexport async function check_and_recatch_data(token,synchronize_update,sec){\n    //負責設定同步畫面及同步抓取資料\n    var result1=await banch_index(token)\n    var result2=await backend(token)\n    var result3=await year_performance(token)\n    synchronize_update(true)//設定同步頁面開始\n    setTimeout(() => {\n        if(result1===true&&result2===true&&result3===true){\n                //代表資料已經更新\n            synchronize_update(false)//設定同步頁面結束\n            return true\n        }\n        return false\n    }, sec);\n};\n\nexport function search(arr,item_index,new_item,reCatchData,synchronize_update){\n    //reCatchData=reCatchData.current\n    // arr 原陣列 ,,  item_index 更新的資料所在的畫面位置  ,,  new_item 更新的資料\n    // function search 把原先的陣列 要更新的資料刪除 之後 加入更新的資料\n        var list=[]\n        var temp=[]\n        var count=0\n        console.log('-----------------------------------')\n        console.log('arr 原陣列',arr)\n        console.log('item_index 要更新的位置',item_index)\n        console.log('new_item 新的資料',new_item)\n    \n        for(let data=0;data<arr.length;data++){\n            if(arr[data].length===1){\n                //如果判斷到 陣列裡面是「’+‘」號  就不加入 跳過\n            }\n            else if(data!==item_index){\n                list.push(arr[data])\n            }\n            else{\n                //如果跑到的data與item_index要插入的位置相等 \n                //新增  並且帶入check function\n                list.push(new_item)\n                check_arr(new_item,reCatchData,synchronize_update)\n            }\n        }\n        \n        for(let none=0;none<list.length;none++){\n            //尋找[[],[],[]] 空字串有幾個 \n            count=0\n            for(let data of list[none]){\n                if(data===''){\n                    count+=1\n                }\n            }\n            if(count<list[none].length-2){\n                temp.push(list[none])\n            }\n        }\n        return temp\n};\n\nexport async function update(new_item,set_new_emp){\n    //function update 更新 performance_per_month的資料\n    var token=window.sessionStorage.getItem('token')\n    var result1=await updata_performance_table(new_item,token)\n    var result2= await backend(token)\n    var result3=await year_performance(token)\n\n    var timer=setInterval(()=>{\n        if(result1===true&&result2===true&&result3===true){\n            set_new_emp('已儲存變更')\n            clearInterval(timer)\n        }\n    },100)\n}\n\nexport async function check_arr(arr,reCatchData,synchronize_update){\n    //當資料填完整後就request api\n    //arr=[帳號,密碼,名字,組別,編號,開始日期,職位權限,工作狀態]\n    var count=0\n    var token=window.sessionStorage.getItem('token')\n    for(var data of arr){\n        if(data!==''){\n            count+=1\n        }\n    }\n    if(count===arr.length){\n        var result=await insert_banch_table(token,arr) //api\n        //result?alert(`資料庫存取成功${result}`):alert(`資料庫存取失敗${result}`)\n        if(result==='update' &&reCatchData===true){\n            check_and_recatch_data(token,synchronize_update,200)//負責設定同步畫面及同步抓取資料\n            reCatchData=false//重新抓取資料狀態 否\n        }\n        \n    }\n};\n\nexport function obj_to_arr(obj){\n    var a=Object.values(obj).map((v)=>{\n        return v\n    })\n    console.log('物件轉陣列',a)\n    return a\n};\n\nexport function rule_num_letter(e){\n    var value =e.target.value\n    var ascii\n    var return_string=''\n\n    for(let num=0;num<value.length;num++){\n        ascii=value.codePointAt(num)\n        if((ascii>=48&&ascii<=57)||(ascii>=65&&ascii<=90)||(ascii>=97&&ascii<=122)){\n            return_string+=String.fromCharCode(ascii)\n        }\n    }\n    e.target.value=return_string\n    return return_string\n\n}\nexport function rule_num(e,maxValue){\n    var value =e.target.value\n    var ascii\n    var return_string=''\n\n    for(let num=0;num<value.length;num++){\n        ascii=value.codePointAt(num)\n        if((ascii>=48&&ascii<=57)){\n            if(num===0 && ascii===48){\n                continue;//跳過第一個數為0\n            }\n            return_string+=String.fromCharCode(ascii)\n        }\n    }\n    return_string=parseInt(return_string.length>0?return_string:'0')//如果是空時  就替換成 '0'\n    return_string=return_string>maxValue?maxValue:return_string//如果出來的值大於最大值時，就把他釘在最大值\n    e.target.value=return_string\n    return return_string\n\n}"]},"metadata":{},"sourceType":"module"}