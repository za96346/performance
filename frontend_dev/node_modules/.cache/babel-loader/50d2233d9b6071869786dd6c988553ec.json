{"ast":null,"code":"import _objectSpread from\"/Users/admin/Downloads/code/dajia/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/admin/Downloads/code/dajia/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/admin/Downloads/code/dajia/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/admin/Downloads/code/dajia/frontend/node_modules/@babel/runtime/regenerator/index.js\";import{Fragment}from\"react\";import{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{login,select_route,backend,banch_index,year_performance}from'./api';import{fade_in}from\"./fade_in\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(_ref){var set_permession_state=_ref.set_permession_state;var _useState=useState({account:'',password:''}),_useState2=_slicedToArray(_useState,2),login_data=_useState2[0],set_login_data=_useState2[1];var _useState3=useState({opacity:0,transition:''}),_useState4=_slicedToArray(_useState3,2),style0=_useState4[0],set_style0=_useState4[1];var _useState5=useState({opacity:0,transition:''}),_useState6=_slicedToArray(_useState5,2),style1=_useState6[0],set_style1=_useState6[1];var _useState7=useState({opacity:0,transition:''}),_useState8=_slicedToArray(_useState7,2),style2=_useState8[0],set_style2=_useState8[1];var _useState9=useState({opacity:0,transition:'',marginTop:'3vh'}),_useState10=_slicedToArray(_useState9,2),style3=_useState10[0],set_style3=_useState10[1];var navigate=useNavigate();useEffect(function(){var token=window.sessionStorage.getItem('token');if(token){select_route(navigate);}else{set_permession_state(false);}fade_in(style0,set_style0,0,'1s');fade_in(style1,set_style1,300,'0.3s');fade_in(style2,set_style2,700,'0.7s');fade_in(style3,set_style3,1100,'1.1s');},[]);var key_press_enter=function key_press_enter(event){if(event.key===\"Enter\"||event.key===\"enter\"){a();}};function a(){return _a.apply(this,arguments);}function _a(){_a=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var states,token,result3,result1,result2,timer;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return login(login_data);case 2:states=_context.sent;if(!states){_context.next=17;break;}set_permession_state(true);token=window.sessionStorage.getItem('token');_context.next=8;return year_performance(token);case 8:result3=_context.sent;_context.next=11;return banch_index(token);case 11:result1=_context.sent;_context.next=14;return backend(token);case 14:result2=_context.sent;console.log('here');timer=setInterval(function(){if(result1&&result2&&result3){//代表資料已經更新\nclearInterval(timer);select_route(navigate);}else{//run 資料同步page\n}},10);case 17:case\"end\":return _context.stop();}}},_callee);}));return _a.apply(this,arguments);}return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"loginbox\",children:/*#__PURE__*/_jsxs(\"div\",{style:style0,onKeyDown:function onKeyDown(event){return key_press_enter(event);},className:\"login\",children:[/*#__PURE__*/_jsx(\"p\",{style:{marginBottom:'8vh'},children:\"\\u767B\\u5165\"}),/*#__PURE__*/_jsx(\"input\",{style:style1,value:login_data.account,onChange:function onChange(e){return set_login_data(_objectSpread(_objectSpread({},login_data),{},{account:e.target.value}));},type:\"text\",placeholder:\"\\u8ACB\\u8F38\\u5165\\u5E33\\u865F\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{style:style2,value:login_data.password,onChange:function onChange(e){return set_login_data(_objectSpread(_objectSpread({},login_data),{},{password:e.target.value}));},type:\"password\",placeholder:\"\\u8ACB\\u8F38\\u5165\\u5BC6\\u78BC\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{style:style3,onClick:a,children:\"\\u767B\\u5165\"})]})})});};export default Login;","map":{"version":3,"sources":["/Users/admin/Downloads/code/dajia/frontend/src/page/login.js"],"names":["Fragment","useState","useEffect","useNavigate","login","select_route","backend","banch_index","year_performance","fade_in","Login","set_permession_state","account","password","login_data","set_login_data","opacity","transition","style0","set_style0","style1","set_style1","style2","set_style2","marginTop","style3","set_style3","navigate","token","window","sessionStorage","getItem","key_press_enter","event","key","a","states","result3","result1","result2","console","log","timer","setInterval","clearInterval","marginBottom","e","target","value"],"mappings":"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","sourcesContent":["import { Fragment } from \"react\"\nimport { useState,useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport {login,select_route,backend,banch_index,year_performance} from './api'\nimport { fade_in } from \"./fade_in\";\nconst Login=({set_permession_state})=>{\n    \n    const [login_data,set_login_data]=useState({\n        account:'',\n        password:''\n    })\n    const [style0,set_style0]=useState(\n        {opacity:0,transition:''}\n    )\n    const [style1,set_style1]=useState(\n        {opacity:0,transition:''}\n    )\n    const [style2,set_style2]=useState(\n        {opacity:0,transition:''}\n    )\n    const [style3,set_style3]=useState(\n        {opacity:0,transition:'',marginTop:'3vh'}\n    )\n\n    const navigate=useNavigate()\n\n    useEffect(()=>{\n        var token=window.sessionStorage.getItem('token')\n        if(token){select_route(navigate)}\n        else{set_permession_state(false)}\n            fade_in(style0,set_style0,0,'1s')\n            fade_in(style1,set_style1,300,'0.3s')\n            fade_in(style2,set_style2,700,'0.7s')\n            fade_in(style3,set_style3,1100,'1.1s')\n    },[])\n    \n\n    const key_press_enter=(event)=>{\n        if(event.key===\"Enter\"||event.key===\"enter\"){\n            a()\n        }\n    }\n    async function a(){\n        var states=await login(login_data)\n        if(states){\n            set_permession_state(true)\n            var token=window.sessionStorage.getItem('token')\n            var result3=await year_performance(token)\n            var result1= await banch_index(token)\n            var result2=await backend(token)\n            console.log('here')\n            var timer=setInterval(() => {\n                \n                if(result1&&result2&&result3){\n                    //代表資料已經更新\n                    clearInterval(timer)\n                    select_route(navigate)\n                }\n                else{\n                    //run 資料同步page\n                }\n            }, 10);\n        }\n    }\n\n\n\n    return(\n        <Fragment>\n            <div className=\"loginbox\">\n            <div style={style0} onKeyDown={(event)=>key_press_enter(event)} className=\"login\">\n                <p style={{marginBottom:'8vh'}}>登入</p>\n                <input style={style1} value={login_data.account} onChange={(e)=>set_login_data({...login_data,account:e.target.value})} type=\"text\" placeholder=\"請輸入帳號\"/><br/>\n\n                <input style={style2} value={login_data.password} onChange={(e)=>set_login_data({...login_data,password:e.target.value})} type=\"password\" placeholder=\"請輸入密碼\"/><br/>\n                <button style={style3} onClick={a}\n                     >登入</button>\n            </div>\n            </div>\n            \n        </Fragment>\n    )\n}\nexport default Login;"]},"metadata":{},"sourceType":"module"}