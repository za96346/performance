{"ast":null,"code":"var _jsxFileName = \"/Users/admin/Downloads/code/dajia/frontend/src/page/login.js\",\n    _s = $RefreshSig$();\n\nimport { Fragment } from \"react\";\nimport { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { login, select_route, backend, banch_index, year_performance, select_all_banch } from './api';\nimport { fade_in } from \"./fade_in\";\nimport { Loading } from \"./backend_component/loading\";\nimport { Login_loading } from \"./backend_component/login_loadind\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = _ref => {\n  _s();\n\n  let {\n    set_permession_state\n  } = _ref;\n  const [load_in, set_load_in] = useState(false);\n  const [text, set_text] = useState('登入中');\n  const [login_data, set_login_data] = useState({\n    account: '',\n    password: ''\n  });\n  const [style0, set_style0] = useState({\n    opacity: 0,\n    transition: ''\n  });\n  const [style1, set_style1] = useState({\n    opacity: 0,\n    transition: ''\n  });\n  const [style2, set_style2] = useState({\n    opacity: 0,\n    transition: ''\n  });\n  const [style3, set_style3] = useState({\n    opacity: 0,\n    transition: '',\n    marginTop: '3vh'\n  });\n  const navigate = useNavigate();\n  useEffect(() => {\n    var token = window.sessionStorage.getItem('token');\n\n    if (token) {\n      select_route(navigate);\n    } else {\n      set_permession_state(false);\n    }\n\n    fade_in(style0, set_style0, 0, '1s');\n    fade_in(style1, set_style1, 300, '0.3s');\n    fade_in(style2, set_style2, 700, '0.7s');\n    fade_in(style3, set_style3, 1100, '1.1s');\n  }, []);\n\n  const key_press_enter = event => {\n    if (event.key === \"Enter\" || event.key === \"enter\") {\n      a();\n    }\n  };\n\n  async function a() {\n    set_load_in(true);\n    set_text('正在驗證登入資訊');\n    var states = await login(login_data); //return true or false\n\n    if (states) {\n      setTimeout(() => {\n        set_text('正在收集資料');\n      }, 500);\n      set_permession_state(true);\n      var token = window.sessionStorage.getItem('token');\n      var result3 = await year_performance(token);\n      var result1 = await banch_index(token);\n      var result2 = await backend(token);\n      var result4 = await select_all_banch(token);\n      console.log('here');\n      var timer = setInterval(() => {\n        if (result1 && result2 && result3 && result4) {\n          set_load_in(false); //代表資料已經更新\n\n          clearInterval(timer);\n          select_route(navigate);\n        }\n      }, 10);\n    } else {\n      set_load_in(false);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loginbox\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: { ...style0,\n          display: load_in === false ? \"block\" : 'none'\n        },\n        onKeyDown: event => key_press_enter(event),\n        className: \"login\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            marginBottom: '8vh'\n          },\n          children: \"\\u767B\\u5165\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: style1,\n          value: login_data.account,\n          onChange: e => set_login_data({ ...login_data,\n            account: e.target.value\n          }),\n          type: \"text\",\n          placeholder: \"\\u8ACB\\u8F38\\u5165\\u5E33\\u865F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 181\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: style2,\n          value: login_data.password,\n          onChange: e => set_login_data({ ...login_data,\n            password: e.target.value\n          }),\n          type: \"password\",\n          placeholder: \"\\u8ACB\\u8F38\\u5165\\u5BC6\\u78BC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 187\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: style3,\n          onClick: a,\n          children: \"\\u767B\\u5165\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: load_in === false ? 'none' : 'flex',\n          alignItems: 'center'\n        },\n        className: \"login\",\n        children: /*#__PURE__*/_jsxDEV(Login_loading, {\n          text: text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Login, \"F2GD66MjSEsph8gN00qaf9VoisE=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/admin/Downloads/code/dajia/frontend/src/page/login.js"],"names":["Fragment","useState","useEffect","useNavigate","login","select_route","backend","banch_index","year_performance","select_all_banch","fade_in","Loading","Login_loading","Login","set_permession_state","load_in","set_load_in","text","set_text","login_data","set_login_data","account","password","style0","set_style0","opacity","transition","style1","set_style1","style2","set_style2","style3","set_style3","marginTop","navigate","token","window","sessionStorage","getItem","key_press_enter","event","key","a","states","setTimeout","result3","result1","result2","result4","console","log","timer","setInterval","clearInterval","display","marginBottom","e","target","value","alignItems"],"mappings":";;;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,KAAT,EAAgBC,YAAhB,EAA8BC,OAA9B,EAAuCC,WAAvC,EAAoDC,gBAApD,EAAsEC,gBAAtE,QAA8F,OAA9F;AACA,SAASC,OAAT,QAAwB,WAAxB;AACA,SAASC,OAAT,QAAwB,6BAAxB;AACA,SAASC,aAAT,QAA8B,mCAA9B;;;AACA,MAAMC,KAAK,GAAG,QAA8B;AAAA;;AAAA,MAA7B;AAAEC,IAAAA;AAAF,GAA6B;AACxC,QAAM,CAACC,OAAD,EAAUC,WAAV,IAAyBf,QAAQ,CAAC,KAAD,CAAvC;AACA,QAAM,CAACgB,IAAD,EAAOC,QAAP,IAAmBjB,QAAQ,CAAC,KAAD,CAAjC;AACA,QAAM,CAACkB,UAAD,EAAaC,cAAb,IAA+BnB,QAAQ,CAAC;AAC1CoB,IAAAA,OAAO,EAAE,EADiC;AAE1CC,IAAAA,QAAQ,EAAE;AAFgC,GAAD,CAA7C;AAIA,QAAM,CAACC,MAAD,EAASC,UAAT,IAAuBvB,QAAQ,CACjC;AAAEwB,IAAAA,OAAO,EAAE,CAAX;AAAcC,IAAAA,UAAU,EAAE;AAA1B,GADiC,CAArC;AAGA,QAAM,CAACC,MAAD,EAASC,UAAT,IAAuB3B,QAAQ,CACjC;AAAEwB,IAAAA,OAAO,EAAE,CAAX;AAAcC,IAAAA,UAAU,EAAE;AAA1B,GADiC,CAArC;AAGA,QAAM,CAACG,MAAD,EAASC,UAAT,IAAuB7B,QAAQ,CACjC;AAAEwB,IAAAA,OAAO,EAAE,CAAX;AAAcC,IAAAA,UAAU,EAAE;AAA1B,GADiC,CAArC;AAGA,QAAM,CAACK,MAAD,EAASC,UAAT,IAAuB/B,QAAQ,CACjC;AAAEwB,IAAAA,OAAO,EAAE,CAAX;AAAcC,IAAAA,UAAU,EAAE,EAA1B;AAA8BO,IAAAA,SAAS,EAAE;AAAzC,GADiC,CAArC;AAIA,QAAMC,QAAQ,GAAG/B,WAAW,EAA5B;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIiC,KAAK,GAAGC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,OAA9B,CAAZ;;AACA,QAAIH,KAAJ,EAAW;AAAE9B,MAAAA,YAAY,CAAC6B,QAAD,CAAZ;AAAwB,KAArC,MACK;AAAEpB,MAAAA,oBAAoB,CAAC,KAAD,CAApB;AAA6B;;AACpCJ,IAAAA,OAAO,CAACa,MAAD,EAASC,UAAT,EAAqB,CAArB,EAAwB,IAAxB,CAAP;AACAd,IAAAA,OAAO,CAACiB,MAAD,EAASC,UAAT,EAAqB,GAArB,EAA0B,MAA1B,CAAP;AACAlB,IAAAA,OAAO,CAACmB,MAAD,EAASC,UAAT,EAAqB,GAArB,EAA0B,MAA1B,CAAP;AACApB,IAAAA,OAAO,CAACqB,MAAD,EAASC,UAAT,EAAqB,IAArB,EAA2B,MAA3B,CAAP;AACH,GARQ,EAQN,EARM,CAAT;;AAWA,QAAMO,eAAe,GAAIC,KAAD,IAAW;AAC/B,QAAIA,KAAK,CAACC,GAAN,KAAc,OAAd,IAAyBD,KAAK,CAACC,GAAN,KAAc,OAA3C,EAAoD;AAChDC,MAAAA,CAAC;AACJ;AACJ,GAJD;;AAKA,iBAAeA,CAAf,GAAmB;AACf1B,IAAAA,WAAW,CAAC,IAAD,CAAX;AACAE,IAAAA,QAAQ,CAAC,UAAD,CAAR;AACA,QAAIyB,MAAM,GAAG,MAAMvC,KAAK,CAACe,UAAD,CAAxB,CAHe,CAGqB;;AACpC,QAAIwB,MAAJ,EAAY;AACRC,MAAAA,UAAU,CAAC,MAAM;AACb1B,QAAAA,QAAQ,CAAC,QAAD,CAAR;AACH,OAFS,EAEP,GAFO,CAAV;AAIAJ,MAAAA,oBAAoB,CAAC,IAAD,CAApB;AAEA,UAAIqB,KAAK,GAAGC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,CAA8B,OAA9B,CAAZ;AACA,UAAIO,OAAO,GAAG,MAAMrC,gBAAgB,CAAC2B,KAAD,CAApC;AACA,UAAIW,OAAO,GAAG,MAAMvC,WAAW,CAAC4B,KAAD,CAA/B;AACA,UAAIY,OAAO,GAAG,MAAMzC,OAAO,CAAC6B,KAAD,CAA3B;AACA,UAAIa,OAAO,GAAG,MAAMvC,gBAAgB,CAAC0B,KAAD,CAApC;AACAc,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,UAAIC,KAAK,GAAGC,WAAW,CAAC,MAAM;AAC1B,YAAIN,OAAO,IAAIC,OAAX,IAAsBF,OAAtB,IAAiCG,OAArC,EAA8C;AAE1ChC,UAAAA,WAAW,CAAC,KAAD,CAAX,CAF0C,CAG1C;;AACAqC,UAAAA,aAAa,CAACF,KAAD,CAAb;AACA9C,UAAAA,YAAY,CAAC6B,QAAD,CAAZ;AACH;AAEJ,OATsB,EASpB,EAToB,CAAvB;AAUH,KAvBD,MAwBK;AACDlB,MAAAA,WAAW,CAAC,KAAD,CAAX;AACH;AACJ;;AAID,sBACI,QAAC,QAAD;AAAA,2BACI;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA,8BACI;AAAK,QAAA,KAAK,EAAE,EAAE,GAAGO,MAAL;AAAa+B,UAAAA,OAAO,EAAEvC,OAAO,KAAK,KAAZ,GAAoB,OAApB,GAA8B;AAApD,SAAZ;AAA0E,QAAA,SAAS,EAAGyB,KAAD,IAAWD,eAAe,CAACC,KAAD,CAA/G;AAAwH,QAAA,SAAS,EAAC,OAAlI;AAAA,gCACI;AAAG,UAAA,KAAK,EAAE;AAAEe,YAAAA,YAAY,EAAE;AAAhB,WAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAO,UAAA,KAAK,EAAE5B,MAAd;AAAsB,UAAA,KAAK,EAAER,UAAU,CAACE,OAAxC;AAAiD,UAAA,QAAQ,EAAGmC,CAAD,IAAOpC,cAAc,CAAC,EAAE,GAAGD,UAAL;AAAiBE,YAAAA,OAAO,EAAEmC,CAAC,CAACC,MAAF,CAASC;AAAnC,WAAD,CAAhF;AAA8H,UAAA,IAAI,EAAC,MAAnI;AAA0I,UAAA,WAAW,EAAC;AAAtJ;AAAA;AAAA;AAAA;AAAA,gBAFJ,eAEoK;AAAA;AAAA;AAAA;AAAA,gBAFpK,eAII;AAAO,UAAA,KAAK,EAAE7B,MAAd;AAAsB,UAAA,KAAK,EAAEV,UAAU,CAACG,QAAxC;AAAkD,UAAA,QAAQ,EAAGkC,CAAD,IAAOpC,cAAc,CAAC,EAAE,GAAGD,UAAL;AAAiBG,YAAAA,QAAQ,EAAEkC,CAAC,CAACC,MAAF,CAASC;AAApC,WAAD,CAAjF;AAAgI,UAAA,IAAI,EAAC,UAArI;AAAgJ,UAAA,WAAW,EAAC;AAA5J;AAAA;AAAA;AAAA;AAAA,gBAJJ,eAI0K;AAAA;AAAA;AAAA;AAAA,gBAJ1K,eAKI;AAAQ,UAAA,KAAK,EAAE3B,MAAf;AAAuB,UAAA,OAAO,EAAEW,CAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALJ;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eASI;AAAK,QAAA,KAAK,EAAE;AAAEY,UAAAA,OAAO,EAAEvC,OAAO,KAAK,KAAZ,GAAoB,MAApB,GAA6B,MAAxC;AAAgD4C,UAAAA,UAAU,EAAE;AAA5D,SAAZ;AAAoF,QAAA,SAAS,EAAC,OAA9F;AAAA,+BACI,QAAC,aAAD;AAAe,UAAA,IAAI,EAAE1C;AAArB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cATJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AAmBH,CA5FD;;GAAMJ,K;UAoBeV,W;;;KApBfU,K;AA6FN,eAAeA,KAAf","sourcesContent":["import { Fragment } from \"react\"\nimport { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { login, select_route, backend, banch_index, year_performance, select_all_banch } from './api'\nimport { fade_in } from \"./fade_in\";\nimport { Loading } from \"./backend_component/loading\";\nimport { Login_loading } from \"./backend_component/login_loadind\";\nconst Login = ({ set_permession_state }) => {\n    const [load_in, set_load_in] = useState(false)\n    const [text, set_text] = useState('登入中')\n    const [login_data, set_login_data] = useState({\n        account: '',\n        password: ''\n    })\n    const [style0, set_style0] = useState(\n        { opacity: 0, transition: '' }\n    )\n    const [style1, set_style1] = useState(\n        { opacity: 0, transition: '' }\n    )\n    const [style2, set_style2] = useState(\n        { opacity: 0, transition: '' }\n    )\n    const [style3, set_style3] = useState(\n        { opacity: 0, transition: '', marginTop: '3vh' }\n    )\n\n    const navigate = useNavigate()\n\n    useEffect(() => {\n        var token = window.sessionStorage.getItem('token')\n        if (token) { select_route(navigate) }\n        else { set_permession_state(false) }\n        fade_in(style0, set_style0, 0, '1s')\n        fade_in(style1, set_style1, 300, '0.3s')\n        fade_in(style2, set_style2, 700, '0.7s')\n        fade_in(style3, set_style3, 1100, '1.1s')\n    }, [])\n\n\n    const key_press_enter = (event) => {\n        if (event.key === \"Enter\" || event.key === \"enter\") {\n            a()\n        }\n    }\n    async function a() {\n        set_load_in(true)\n        set_text('正在驗證登入資訊')\n        var states = await login(login_data)//return true or false\n        if (states) {\n            setTimeout(() => {\n                set_text('正在收集資料')\n            }, 500)\n\n            set_permession_state(true)\n\n            var token = window.sessionStorage.getItem('token')\n            var result3 = await year_performance(token)\n            var result1 = await banch_index(token)\n            var result2 = await backend(token)\n            var result4 = await select_all_banch(token)\n            console.log('here')\n            var timer = setInterval(() => {\n                if (result1 && result2 && result3 && result4) {\n\n                    set_load_in(false)\n                    //代表資料已經更新\n                    clearInterval(timer)\n                    select_route(navigate)\n                }\n\n            }, 10);\n        }\n        else {\n            set_load_in(false)\n        }\n    }\n\n\n\n    return (\n        <Fragment>\n            <div className=\"loginbox\">\n                <div style={{ ...style0, display: load_in === false ? \"block\" : 'none' }} onKeyDown={(event) => key_press_enter(event)} className=\"login\">\n                    <p style={{ marginBottom: '8vh' }}>登入</p>\n                    <input style={style1} value={login_data.account} onChange={(e) => set_login_data({ ...login_data, account: e.target.value })} type=\"text\" placeholder=\"請輸入帳號\" /><br />\n\n                    <input style={style2} value={login_data.password} onChange={(e) => set_login_data({ ...login_data, password: e.target.value })} type=\"password\" placeholder=\"請輸入密碼\" /><br />\n                    <button style={style3} onClick={a}\n                    >登入</button>\n                </div>\n                <div style={{ display: load_in === false ? 'none' : 'flex', alignItems: 'center' }} className='login'>\n                    <Login_loading text={text} />\n                </div>\n            </div>\n\n\n        </Fragment>\n    )\n}\nexport default Login;"]},"metadata":{},"sourceType":"module"}