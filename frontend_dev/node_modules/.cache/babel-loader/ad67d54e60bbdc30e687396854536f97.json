{"ast":null,"code":"import _objectSpread from\"/Users/admin/Downloads/code/dajia/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/admin/Downloads/code/dajia/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useNavigate,useParams,useLocation,Link}from\"react-router-dom\";import{admin_sidebar,backend}from\"../api\";import{useEffect,useState}from\"react\";import{Return_component}from\"../backend_component/data_input\";import{Search_year,Search_name,Search_month,New_employee}from\"../backend_component/search_input\";import{Loading}from\"../backend_component/loading\";import{sequential_search}from\"../ algorithm/sequential_search\";import{intersection}from\"../ algorithm/intersection\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Performance_per_month=function Performance_per_month(_ref){var data=_ref.data,synchronize_update=_ref.synchronize_update,synchronize=_ref.synchronize;var _useParams=useParams(),page=_useParams.page;var _useLocation=useLocation(),state=_useLocation.state;var navigate=useNavigate();var _useParams2=useParams(),article_page=_useParams2.article_page;var _useState=useState('none'),_useState2=_slicedToArray(_useState,2),display=_useState2[0],set_display=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),page_data_arr=_useState4[0],set_page_data_arr=_useState4[1];var _useState5=useState('未更改'),_useState6=_slicedToArray(_useState5,2),new_emp=_useState6[0],set_new_emp=_useState6[1];var _useState7=useState({name:'',year:undefined,month:undefined}),_useState8=_slicedToArray(_useState7,2),search=_useState8[0],set_search=_useState8[1];var permession=window.sessionStorage.getItem('permession');useEffect(function(){console.log('name=>',state);set_search(_objectSpread(_objectSpread({},search),{},{name:!state?'':state.name,year:!state?undefined:state.year}));if(data.length!==0){set_page_data_arr(data);}else{set_page_data_arr([]);}},[page,article_page,data]);useEffect(function(){var result_name=[];var result_year=[];var result_month=[];console.log('search',search);if(typeof page_data_arr!='undefined'&&data){search.name!=='請選擇組員'&&typeof search.name!='undefined'&&search.name.length>0?result_name=sequential_search(data,1,search.name):result_name=data;typeof search.year!='undefined'&&search.year.length>0?result_year=sequential_search(data,4,parseInt(search.year)):result_year=data;typeof search.month!='undefined'&&search.month.length>0?result_month=sequential_search(data,5,parseInt(search.month)):result_month=data;var result=intersection(result_month,result_name,result_year);console.log(\"data\\u9577\\u5EA6\".concat(data.length));console.log(\"\\u540D\\u5B57 \\u6536\\u5C0B\\u7D50\\u679C\".concat(result_name.length,\"\\u5247\"));console.log(\"\\u5E74\\u5EA6 \\u6536\\u5C0B\\u7D50\\u679C\".concat(result_year.length,\"\\u5247\"));console.log(\"\\u6708\\u4EFD \\u6536\\u5C0B\\u7D50\\u679C\".concat(result_month.length,\"\\u5247\"));console.log(\"\\u7E3D\\u6536\\u5C0B\\u7D50\\u679C\".concat(result.length,\"\\u5247\"));set_page_data_arr(result);}},[search,data]);function bar(){if(admin_sidebar().indexOf(page)===-1){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(New_employee,{new_emp:new_emp}),/*#__PURE__*/_jsx(Search_year,{search:search,set_search:set_search}),/*#__PURE__*/_jsx(Search_month,{search:search,set_search:set_search})]});}else{return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(New_employee,{new_emp:new_emp}),/*#__PURE__*/_jsx(Search_name,{search:search,set_search:set_search}),/*#__PURE__*/_jsx(Search_year,{search:search,set_search:set_search}),/*#__PURE__*/_jsx(Search_month,{search:search,set_search:set_search})]});}}if(!page_data_arr||synchronize===true){return/*#__PURE__*/_jsx(Loading,{});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"search_bar\",children:/*#__PURE__*/_jsx(\"div\",{children:bar()})}),page_data_arr.length!==0?/*#__PURE__*/_jsx(Return_component,{page_data_arr:page_data_arr,set_page_data_arr:set_page_data_arr,number:1,page:page,set_new_emp:set_new_emp,synchronize_update:synchronize_update}):/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:\"\\u67E5\\u7121\\u7D50\\u679C\"}),/*#__PURE__*/_jsx(\"div\",{style:{overflow:'auto',width:'100%',alignItems:'center',justifyContent:'center',display:article_page==='每月考核績效'?'flex':'none'},children:/*#__PURE__*/_jsx(Link,{to:\"/backend/wordFile/\".concat(page,\"/\").concat(search.name.length===0?'請選擇組員':search.name,\"/\").concat(search.year,\"/\").concat(search.month),children:/*#__PURE__*/_jsx(\"button\",{children:\"\\u9810\\u89BD\\u5217\\u5370\"})})})]});};export default Performance_per_month;","map":{"version":3,"sources":["/Users/admin/Downloads/code/dajia/frontend/src/page/article_page/performance_per_month.js"],"names":["useNavigate","useParams","useLocation","Link","admin_sidebar","backend","useEffect","useState","Return_component","Search_year","Search_name","Search_month","New_employee","Loading","sequential_search","intersection","Performance_per_month","data","synchronize_update","synchronize","page","state","navigate","article_page","display","set_display","page_data_arr","set_page_data_arr","new_emp","set_new_emp","name","year","undefined","month","search","set_search","permession","window","sessionStorage","getItem","console","log","length","result_name","result_year","result_month","parseInt","result","bar","indexOf","overflow","width","alignItems","justifyContent"],"mappings":"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","sourcesContent":["import { useNavigate, useParams,useLocation, Link } from \"react-router-dom\";\nimport { admin_sidebar,backend } from \"../api\";\nimport { useEffect,useState } from \"react\";\nimport  {Return_component}  from \"../backend_component/data_input\";\nimport {Search_year,Search_name,Search_month,New_employee} from \"../backend_component/search_input\";\nimport { Loading } from \"../backend_component/loading\";\nimport { sequential_search } from \"../ algorithm/sequential_search\";\nimport { intersection } from \"../ algorithm/intersection\";\n\nconst Performance_per_month=({data,synchronize_update,synchronize})=>{\n    const {page}=useParams()\n    const {state}=useLocation()\n    const navigate=useNavigate()\n    const {article_page}=useParams()\n    const [display,set_display]=useState('none')\n    const [page_data_arr,set_page_data_arr]=useState([])\n    const [new_emp,set_new_emp]=useState('未更改')\n    const [search,set_search]=useState({\n        name:'',\n        year:undefined,\n        month:undefined,\n    })\n    var permession=window.sessionStorage.getItem('permession')\n\n    useEffect(()=>{\n        console.log('name=>',state)\n        set_search({...search,\n            name:!state?'':state.name,\n            year:!state?undefined:state.year})\n        if(data.length!==0){\n            set_page_data_arr(data)\n        }\n        else{\n            set_page_data_arr([])\n        }\n    },[page,article_page,data])\n    useEffect(()=>{\n        var result_name=[]\n        var result_year=[]\n        var result_month=[]\n        console.log('search',search)\n        if(typeof(page_data_arr)!='undefined'&&data){\n            \n            search.name!=='請選擇組員'&&typeof(search.name)!='undefined'&&search.name.length>0\n            ?result_name=sequential_search(data,1,search.name)\n            :result_name=data\n            typeof(search.year)!='undefined' && search.year.length>0\n            ?result_year=sequential_search(data,4,parseInt(search.year))\n            :result_year=data\n            typeof(search.month)!='undefined' && search.month.length>0\n            ?result_month=sequential_search(data,5,parseInt(search.month))\n            :result_month=data\n            \n            \n            var result=intersection(result_month,result_name,result_year)\n            console.log(`data長度${data.length}`)\n            console.log(`名字 收尋結果${result_name.length}則`)\n            console.log(`年度 收尋結果${result_year.length}則`)\n            console.log(`月份 收尋結果${result_month.length}則`)\n            console.log(`總收尋結果${result.length}則`)\n            set_page_data_arr(result)\n        }\n    },[search,data])\n\n\n    function bar(){\n        if(admin_sidebar().indexOf(page)===-1){\n            return(\n                <> \n                    <New_employee new_emp={new_emp}/>{/*自動存取的按鈕 */}\n                    <Search_year search={search} set_search={set_search}/>\n                    <Search_month search={search} set_search={set_search}/>\n                </>\n            )\n        }\n        else{\n            return(\n            <>\n                <New_employee new_emp={new_emp}/>{/*自動存取的按鈕 */}\n                <Search_name search={search} set_search={set_search}/>\n                <Search_year search={search} set_search={set_search}/>\n                <Search_month search={search} set_search={set_search}/>\n            </>\n            )\n        }\n    }\n    if(!page_data_arr||synchronize===true){\n        return(<Loading/>)\n    }\n    return(\n        <>\n        <div className=\"search_bar\">\n            <div>\n                {\n                    bar()\n                }\n            </div>\n        </div>\n\n        {\n            page_data_arr.length!==0\n            ?<Return_component\n            page_data_arr={page_data_arr}\n            set_page_data_arr={set_page_data_arr}\n            number={1}\n            page={page}\n            set_new_emp={set_new_emp}\n            synchronize_update={synchronize_update}/>\n            :<div className=\"container\">查無結果</div>\n        }\n        \n        <div style={{overflow:'auto',width:'100%',alignItems:'center',justifyContent:'center',display:article_page==='每月考核績效'?'flex':'none'}}>\n            <Link  \n                to={`/backend/wordFile/${page}/${search.name.length===0?'請選擇組員':search.name}/${search.year}/${search.month}`}>\n                <button>\n\n                        預覽列印\n                    \n                </button>\n            </Link>\n        </div>\n        </>\n    )\n}\nexport default Performance_per_month;"]},"metadata":{},"sourceType":"module"}