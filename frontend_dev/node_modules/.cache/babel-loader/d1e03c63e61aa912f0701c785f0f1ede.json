{"ast":null,"code":"import _slicedToArray from\"/Users/admin/Downloads/code/dajia/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Article from\"./backend_component/article\";import Sidebar from\"./backend_component/sidebar\";import Title from\"./backend_component/title\";import{admin_sidebar,log_out,personal_sidebar,article_bar_arr}from\"./api\";import{useParams,useNavigate}from\"react-router-dom\";import{useCallback,useEffect,useState}from\"react\";import{useRef}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Admin=function Admin(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),synchronize=_useState2[0],synchronize_update=_useState2[1];//設定同步頁面\nvar _useParams=useParams(),page=_useParams.page;var _useParams2=useParams(),article_page=_useParams2.article_page;var navigate=useNavigate();var combine=admin_sidebar().concat(log_out);var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],set_data=_useState4[1];var identifyCallback=useCallback(function(){function identify(){var value=[];if(page!=='登出'){if(article_page===article_bar_arr[1]){//年度\nvalue=JSON.parse(window.sessionStorage.getItem('year_performance'))[page];console.log('年度資料',value);set_data(value.length>0?value:[]);}else if(article_page===article_bar_arr[2]){//每月\nvalue=JSON.parse(window.sessionStorage.getItem('data'))[page];console.log('每月資料',value);set_data(value.length>0?value:[]);}else if(page==='新增年度'){//新增年度\nvalue=[];var obj=JSON.parse(window.sessionStorage.getItem('banch_index'));delete obj['主管'];Object.values(obj).map(function(item){//物件轉陣列\nreturn item.map(function(item){//二維陣列 to 一維陣列\nif(item[7]!=='off'&&item[6]!=='管理員'){value.push(item);}return value;});});console.log('新增年度',value);set_data(value.length>0?value:[]);}else{//首頁 離職員工\nvalue=JSON.parse(window.sessionStorage.getItem('banch_index'))[page];console.log('首頁 離職員工資料',value,page);set_data(value.length>0?value:[]);}}}console.log('\\n\\n\\n\\n\\n\\nchange\\n\\n\\n\\n\\n\\n\\n\\n');identify();},[synchronize,article_page,page]);useEffect(function(){identifyCallback();},[identifyCallback]);useEffect(function(){if(combine.indexOf(page)===-1){navigate('/access====>error');}else if(article_page){if(personal_sidebar.indexOf(article_page)===-1){navigate('/access====>error');}else if(article_page==='個人年度目標'){navigate('/access====>error');}else if(page==='組別變動'&&article_page!==undefined){navigate('/access====>error');}}});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"head\",children:[/*#__PURE__*/_jsx(Title,{sidebar_arr:admin_sidebar()}),/*#__PURE__*/_jsx(Sidebar,{sidebar_arr:combine,style:\"lesssmall\"}),/*#__PURE__*/_jsx(Sidebar,{sidebar_arr:combine,style:\"small\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"body\",children:[/*#__PURE__*/_jsx(Sidebar,{sidebar_arr:combine,style:\"large\"}),/*#__PURE__*/_jsx(Article,{data:data,synchronize_update:synchronize_update,synchronize:synchronize})]})]});};export default Admin;","map":{"version":3,"sources":["/Users/admin/Downloads/code/dajia/frontend/src/page/admin.js"],"names":["Article","Sidebar","Title","admin_sidebar","log_out","personal_sidebar","article_bar_arr","useParams","useNavigate","useCallback","useEffect","useState","useRef","Admin","synchronize","synchronize_update","page","article_page","navigate","combine","concat","data","set_data","identifyCallback","identify","value","JSON","parse","window","sessionStorage","getItem","console","log","length","obj","Object","values","map","item","push","indexOf","undefined"],"mappings":"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","sourcesContent":["import Article from \"./backend_component/article\";\nimport Sidebar from \"./backend_component/sidebar\";\nimport Title from \"./backend_component/title\";\nimport { admin_sidebar, log_out, personal_sidebar, article_bar_arr } from \"./api\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { useRef } from \"react\";\nconst Admin = () => {\n    const [synchronize, synchronize_update] = useState(false)//設定同步頁面\n    const { page } = useParams()\n    const { article_page } = useParams()\n    const navigate = useNavigate()\n    const combine = admin_sidebar().concat(log_out)\n    const [data, set_data] = useState([]);\n\n    const identifyCallback = useCallback(() => {\n\n        function identify() {\n            var value = []\n            if (page !== '登出') {\n                if (article_page === article_bar_arr[1]) {\n                    //年度\n                    value = JSON.parse(window.sessionStorage.getItem('year_performance'))[page]\n                    console.log('年度資料',value)\n                    set_data(value.length > 0 ? value : [])\n                }\n                else if (article_page === article_bar_arr[2]) {\n                    //每月\n                    value = JSON.parse(window.sessionStorage.getItem('data'))[page]\n                    console.log('每月資料',value)\n                    set_data(value.length > 0 ? value : [])\n                }\n                else if (page === '新增年度') {\n                    //新增年度\n                    value = []\n                    var obj = JSON.parse(window.sessionStorage.getItem('banch_index'))\n                    delete obj['主管']\n                    Object.values(obj).map((item) => {\n                        //物件轉陣列\n                        \n                        return item.map((item) => {\n                            //二維陣列 to 一維陣列\n                            if (item[7] !== 'off' && item[6] !== '管理員') {\n                                value.push(item)\n                            }\n                            return value\n                        })\n                    })\n                    console.log('新增年度',value)\n                    set_data(value.length > 0 ? value : [])\n                }\n                else {\n                    //首頁 離職員工\n                    \n                    value = JSON.parse(window.sessionStorage.getItem('banch_index'))[page]\n                    console.log('首頁 離職員工資料',value,page)\n                    set_data(value.length > 0 ? value : [])\n                }\n            }\n\n        }\n        console.log('\\n\\n\\n\\n\\n\\nchange\\n\\n\\n\\n\\n\\n\\n\\n')\n        identify()\n    }, [synchronize, article_page, page])\n\n    useEffect(() => {\n        identifyCallback()\n    }, [identifyCallback])\n\n    useEffect(() => {\n        if (combine.indexOf(page) === -1) {\n            navigate('/access====>error')\n        }\n        else if (article_page) {\n\n            if (personal_sidebar.indexOf(article_page) === -1) {\n                navigate('/access====>error')\n            }\n            else if (article_page === '個人年度目標') {\n                navigate('/access====>error')\n            }\n            else if (page === '組別變動' && article_page !== undefined) {\n                navigate('/access====>error')\n            }\n\n        }\n    });\n\n    return (\n        <>\n            <div className=\"head\">\n                <Title sidebar_arr={admin_sidebar()} />\n                <Sidebar sidebar_arr={combine} style={\"lesssmall\"} />\n                <Sidebar sidebar_arr={combine} style={\"small\"} />\n            </div>\n\n            <div className=\"body\">\n                <Sidebar sidebar_arr={combine} style={\"large\"} />\n                <Article data={data} synchronize_update={synchronize_update} synchronize={synchronize} />\n            </div>\n        </>\n    )\n}\nexport default Admin;"]},"metadata":{},"sourceType":"module"}