{"ast":null,"code":"import _asyncToGenerator from\"/Users/admin/Downloads/code/dajia/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"/Users/admin/Downloads/code/dajia/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/admin/Downloads/code/dajia/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/admin/Downloads/code/dajia/frontend/node_modules/@babel/runtime/regenerator/index.js\";import{Loading}from\"../backend_component/loading\";import{Return_component}from\"../backend_component/data_input\";import{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import{change_banch_name}from\"../api\";import{check_and_recatch_data}from\"../method/method_func\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Group_manage=function Group_manage(_ref){var data=_ref.data,synchronize_update=_ref.synchronize_update,synchronize=_ref.synchronize;var _useParams=useParams(),page=_useParams.page;var token=window.sessionStorage.getItem('token');var _useParams2=useParams(),article_page=_useParams2.article_page;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),page_data_arr=_useState2[0],set_page_data_arr=_useState2[1];var _useState3=useState(['','']),_useState4=_slicedToArray(_useState3,2),new_arr=_useState4[0],set_new_arr=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),commit=_useState6[0],set_commit=_useState6[1];var _useState7=useState('block'),_useState8=_slicedToArray(_useState7,2),btn=_useState8[0],set_btn=_useState8[1];useEffect(function(){//當input更改資料的時候\n//new_arr=[原來的組,更改名稱後的組]\nvar original_group=new_arr[0];var change_group=new_arr[1];console.log('new_arr',new_arr);if(change_group!==''&&change_group!=='新增'){var temp=commit.map(function(item){//item [原來的組,更改名稱後的組]\nif(original_group===item[0]){return[item[0],change_group];}else{return item;}});set_commit(temp);}},[new_arr]);useEffect(function(){console.log('commit',commit);},[commit]);useEffect(function(){if(data.length!==0){set_page_data_arr(data);var temp=data.map(function(item){return[item,item];});set_commit(temp);}else{set_commit(['','']);set_page_data_arr([]);}},[page,article_page,data]);if(!page_data_arr||synchronize===true){return/*#__PURE__*/_jsx(Loading,{});}return/*#__PURE__*/_jsxs(_Fragment,{children:[page_data_arr.length>0?/*#__PURE__*/_jsx(Return_component,{page_data_arr:page_data_arr,set_page_data_arr:set_page_data_arr,number:6,synchronize_update:synchronize_update,page:page,set_new_arr:set_new_arr}):/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:\"\\u67E5\\u7121\\u7D50\\u679C\"}),/*#__PURE__*/_jsxs(\"div\",{style:{overflow:'auto',width:'100%',alignItems:'center',justifyContent:'center',display:'flex'},children:[/*#__PURE__*/_jsx(\"button\",{style:{display:btn},onClick:function onClick(){set_page_data_arr([].concat(_toConsumableArray(page_data_arr),[\"\\u65B0\\u589E\"]));set_commit([].concat(_toConsumableArray(commit),[[\"\\u65B0\\u589E\",'新增']]));set_btn('none');},children:\"\\u65B0\\u589E\"}),/*#__PURE__*/_jsx(\"button\",{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return change_banch_name(token,commit);case 2:check_and_recatch_data(token,synchronize_update,1000);case 3:case\"end\":return _context.stop();}}},_callee);})),children:\"\\u5132\\u5B58\"})]})]});};export default Group_manage;","map":{"version":3,"sources":["/Users/admin/Downloads/code/dajia/frontend/src/page/article_page/group_manage.js"],"names":["Loading","Return_component","useState","useEffect","useParams","change_banch_name","check_and_recatch_data","Group_manage","data","synchronize_update","synchronize","page","token","window","sessionStorage","getItem","article_page","page_data_arr","set_page_data_arr","new_arr","set_new_arr","commit","set_commit","btn","set_btn","original_group","change_group","console","log","temp","map","item","length","overflow","width","alignItems","justifyContent","display"],"mappings":"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","sourcesContent":["import { Loading } from \"../backend_component/loading\";\nimport { Return_component } from \"../backend_component/data_input\";\nimport { useState,useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { change_banch_name } from \"../api\";\nimport { check_and_recatch_data } from \"../method/method_func\";\n\nconst Group_manage=({data,synchronize_update,synchronize})=>{\n    const {page}=useParams()\n    var token=window.sessionStorage.getItem('token')\n\n    const {article_page}=useParams()\n    const [page_data_arr,set_page_data_arr]=useState([])\n    const [new_arr,set_new_arr]=useState(['',''])\n    const [commit,set_commit]=useState([])\n    const [btn,set_btn]=useState('block')\n    useEffect(()=>{\n        //當input更改資料的時候\n        //new_arr=[原來的組,更改名稱後的組]\n        var original_group=new_arr[0]\n        var change_group=new_arr[1]\n        console.log('new_arr',new_arr)\n        if(change_group!==''&&change_group!=='新增'){\n            var temp=commit.map((item)=>{\n                //item [原來的組,更改名稱後的組]\n                if(original_group===item[0]){\n                    return [item[0],change_group]\n                }\n                else{\n                    return item\n                }\n            })\n            set_commit(temp)\n        }\n        \n    },[new_arr])\n    useEffect(()=>{\n        console.log('commit',commit)\n    },[commit])\n\n\n    useEffect(()=>{\n\n        if(data.length!==0){\n            set_page_data_arr(data)\n            var temp=data.map((item)=>{\n                return [item,item]\n            })\n            set_commit(temp)\n        }\n        else{\n            set_commit(['',''])\n            set_page_data_arr([])\n        }\n    },[page,article_page,data])\n\n    if(!page_data_arr||synchronize===true){\n        return(<Loading/>)\n    }\n    return(\n        <>\n            \n            {\n                page_data_arr.length>0\n                ?<Return_component\n                page_data_arr={page_data_arr}\n                set_page_data_arr={set_page_data_arr}\n                number={6} \n                synchronize_update={synchronize_update}\n                page={page}\n                set_new_arr={set_new_arr}\n                />\n                :<div className=\"container\">查無結果</div>\n            }\n            <div style={{overflow:'auto',width:'100%',alignItems:'center',justifyContent:'center',display:'flex'}}>\n                <button \n                    style={{display:btn}}\n                    onClick={()=>{\n                        set_page_data_arr([...page_data_arr,`新增`])\n                        set_commit([...commit,[`新增`,'新增']])\n                        set_btn('none')\n                    }}>\n                    新增</button>\n                <button\n                onClick={async()=>{\n                    await change_banch_name(token,commit)\n                    check_and_recatch_data(token,synchronize_update,1000)\n                }}\n                >儲存</button>\n            </div>\n        </>\n    )\n\n}\nexport default Group_manage;"]},"metadata":{},"sourceType":"module"}