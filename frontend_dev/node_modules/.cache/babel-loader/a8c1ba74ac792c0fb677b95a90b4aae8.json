{"ast":null,"code":"import _classPrivateFieldLooseBase from \"/Users/siou/Downloads/code/performance/frontend_dev/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js\";\nimport _classPrivateFieldLooseKey from \"/Users/siou/Downloads/code/performance/frontend_dev/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js\";\nimport { io, Manager } from 'socket.io-client';\nimport { ip } from '../config';\nconst socketUrl = {\n  url: `http://${ip}:5002`,\n  urlMain: '/main'\n};\n\nvar _connection = /*#__PURE__*/_classPrivateFieldLooseKey(\"_connection\");\n\nvar _disconnection = /*#__PURE__*/_classPrivateFieldLooseKey(\"_disconnection\");\n\nvar _emitBasicEvent = /*#__PURE__*/_classPrivateFieldLooseKey(\"_emitBasicEvent\");\n\nvar _emitMainEvent = /*#__PURE__*/_classPrivateFieldLooseKey(\"_emitMainEvent\");\n\nexport default class SocketIO extends Manager {\n  constructor(token) {\n    super(socketUrl.url, {\n      transports: ['websocket'],\n      autoConnect: true,\n      forceNew: true,\n      query: `${token}siousiou`\n    });\n    this._token = token;\n  }\n\n  static async getInstance(token) {\n    let event = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    let params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n    if (!SocketIO.instance) {\n      SocketIO.instance = new SocketIO(token);\n    }\n\n    _classPrivateFieldLooseBase(this, _connection)[_connection](SocketIO.instance);\n\n    _classPrivateFieldLooseBase(this, _disconnection)[_disconnection](SocketIO.instance);\n\n    if (event) {\n      _classPrivateFieldLooseBase(this, _emitBasicEvent)[_emitBasicEvent](SocketIO.instance, event, params);\n\n      _classPrivateFieldLooseBase(this, _emitMainEvent)[_emitMainEvent](SocketIO.instance, event, params);\n    }\n\n    return await SocketIO.instance;\n  }\n\n}\n\nfunction _connection2(instance) {\n  instance.socket('/').on('connect', data => {\n    console.log('connect data => ', data);\n  });\n}\n\nfunction _disconnection2(instance) {\n  instance.socket('/').on('disconnect', data => {\n    console.log('is already disconnected');\n  });\n}\n\nfunction _emitBasicEvent2(instance, event, params) {\n  instance.socket('/').emit(event, params);\n}\n\nfunction _emitMainEvent2(instance, event, params) {\n  instance.socket('/main').emit(event, params);\n}\n\nObject.defineProperty(SocketIO, _emitMainEvent, {\n  value: _emitMainEvent2\n});\nObject.defineProperty(SocketIO, _emitBasicEvent, {\n  value: _emitBasicEvent2\n});\nObject.defineProperty(SocketIO, _disconnection, {\n  value: _disconnection2\n});\nObject.defineProperty(SocketIO, _connection, {\n  value: _connection2\n});","map":{"version":3,"sources":["/Users/siou/Downloads/code/performance/frontend_dev/src/page/socketIo.js"],"names":["io","Manager","ip","socketUrl","url","urlMain","SocketIO","constructor","token","transports","autoConnect","forceNew","query","_token","getInstance","event","params","instance","socket","on","data","console","log","emit"],"mappings":";;AAAA,SAAQA,EAAR,EAAWC,OAAX,QAAyB,kBAAzB;AACA,SAAQC,EAAR,QAAiB,WAAjB;AACA,MAAMC,SAAS,GAAG;AACdC,EAAAA,GAAG,EAAG,UAASF,EAAG,OADJ;AAEdG,EAAAA,OAAO,EAAE;AAFK,CAAlB;;;;;;;;;;AAMA,eAAe,MAAMC,QAAN,SAAuBL,OAAvB,CAA8B;AACzCM,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAML,SAAS,CAACC,GAAhB,EAAoB;AAChBK,MAAAA,UAAU,EAAE,CAAC,WAAD,CADI;AAEhBC,MAAAA,WAAW,EAAE,IAFG;AAGhBC,MAAAA,QAAQ,EAAE,IAHM;AAIhBC,MAAAA,KAAK,EAAG,GAAEJ,KAAM;AAJA,KAApB;AAMA,SAAKK,MAAL,GAAcL,KAAd;AACH;;AAEuB,eAAXM,WAAW,CAACN,KAAD,EAAqC;AAAA,QAA7BO,KAA6B,uEAArB,IAAqB;AAAA,QAAfC,MAAe,uEAAN,IAAM;;AACzD,QAAI,CAACV,QAAQ,CAACW,QAAd,EAAwB;AACpBX,MAAAA,QAAQ,CAACW,QAAT,GAAoB,IAAIX,QAAJ,CAAaE,KAAb,CAApB;AACH;;AACD,gEAAkBF,QAAQ,CAACW,QAA3B;;AACA,sEAAqBX,QAAQ,CAACW,QAA9B;;AACA,QAAIF,KAAJ,EAAW;AACP,0EAAsBT,QAAQ,CAACW,QAA/B,EAAyCF,KAAzC,EAAgDC,MAAhD;;AACA,wEAAqBV,QAAQ,CAACW,QAA9B,EAAwCF,KAAxC,EAA+CC,MAA/C;AACH;;AACD,WAAO,MAAMV,QAAQ,CAACW,QAAtB;AACH;;AAtBwC;;sBAwBrBA,Q,EAAU;AAC1BA,EAAAA,QAAQ,CAACC,MAAT,CAAgB,GAAhB,EAAqBC,EAArB,CAAwB,SAAxB,EAAoCC,IAAD,IAAU;AACzCC,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAA+BF,IAA/B;AACH,GAFD;AAGH;;yBAEsBH,Q,EAAU;AAC7BA,EAAAA,QAAQ,CAACC,MAAT,CAAgB,GAAhB,EAAqBC,EAArB,CAAwB,YAAxB,EAAuCC,IAAD,IAAU;AAC5CC,IAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACH,GAFD;AAGH;;0BAEuBL,Q,EAAUF,K,EAAOC,M,EAAQ;AAC7CC,EAAAA,QAAQ,CAACC,MAAT,CAAgB,GAAhB,EAAqBK,IAArB,CAA0BR,KAA1B,EAAiCC,MAAjC;AACH;;yBAEsBC,Q,EAAUF,K,EAAOC,M,EAAQ;AAC5CC,EAAAA,QAAQ,CAACC,MAAT,CAAgB,OAAhB,EAAyBK,IAAzB,CAA8BR,KAA9B,EAAqCC,MAArC;AACH;;sBA1CgBV,Q;;;sBAAAA,Q;;;sBAAAA,Q;;;sBAAAA,Q","sourcesContent":["import {io,Manager} from 'socket.io-client';\nimport {ip} from '../config';\nconst socketUrl = {\n    url: `http://${ip}:5002`,\n    urlMain: '/main',\n}\n\n\nexport default class SocketIO extends Manager{\n    constructor(token) {\n        super(socketUrl.url,{\n            transports: ['websocket'],\n            autoConnect: true,\n            forceNew: true,\n            query: `${token}siousiou`,\n        })\n        this._token = token;\n    }\n\n    static async getInstance(token, event = null, params = null) {\n        if (!SocketIO.instance) {\n            SocketIO.instance = new SocketIO(token)\n        }\n        this.#_connection(SocketIO.instance)\n        this.#_disconnection(SocketIO.instance)\n        if (event) {\n            this.#_emitBasicEvent(SocketIO.instance, event, params)\n            this.#_emitMainEvent(SocketIO.instance, event, params)\n        }\n        return await SocketIO.instance;\n    }\n\n    static #_connection(instance) {\n        instance.socket('/').on('connect', (data) => {\n            console.log('connect data => ',data)\n        });\n    }\n\n    static #_disconnection(instance) {\n        instance.socket('/').on('disconnect', (data) => {\n            console.log('is already disconnected')\n        })\n    }\n\n    static #_emitBasicEvent(instance, event, params) {\n        instance.socket('/').emit(event, params);\n    }\n    \n    static #_emitMainEvent(instance, event, params) {\n        instance.socket('/main').emit(event, params);\n    }\n\n}\n"]},"metadata":{},"sourceType":"module"}