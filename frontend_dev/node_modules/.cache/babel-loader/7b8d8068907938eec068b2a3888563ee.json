{"ast":null,"code":"var _jsxFileName = \"/Users/admin/Downloads/code/dajia/frontend/src/page/admin.js\",\n    _s = $RefreshSig$();\n\nimport Article from \"./backend_component/article\";\nimport Sidebar from \"./backend_component/sidebar\";\nimport Title from \"./backend_component/title\";\nimport { admin_sidebar, log_out, personal_sidebar, article_bar_arr } from \"./api\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { useRef } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Admin = () => {\n  _s();\n\n  const [synchronize, synchronize_update] = useState(false); //設定同步頁面\n\n  const {\n    page\n  } = useParams();\n  const {\n    article_page\n  } = useParams();\n  const navigate = useNavigate();\n  const combine = admin_sidebar.concat(log_out);\n  const [data, set_data] = useState([]);\n  const identifyCallback = useCallback(() => {\n    function identify() {\n      var value;\n\n      if (page !== '登出') {\n        if (article_page === article_bar_arr[1]) {\n          value = JSON.parse(window.sessionStorage.getItem('year_performance'))[page];\n          set_data(value.length > 0 ? value : []);\n        } else if (article_page === article_bar_arr[2]) {\n          value = JSON.parse(window.sessionStorage.getItem('data'))[page];\n          set_data(value.length > 0 ? value : []);\n        } else if (page === '主管') {} else if (page === '新增年度') {\n          //新增年度\n          value = [];\n          var obj = JSON.parse(window.sessionStorage.getItem('banch_index'));\n          Object.values(obj).map(item => {\n            //物件轉陣列\n            return item.map(item => {\n              //二維陣列 to 一維陣列\n              if (item[7] !== 'off' && item[6] !== '管理員') {\n                value.push(item);\n              }\n\n              return value;\n            });\n          });\n          set_data(value.length > 0 ? value : []);\n        } else {\n          //首頁 離職員工\n          value = JSON.parse(window.sessionStorage.getItem('banch_index'))[page];\n          set_data(value.length > 0 ? value : []);\n        }\n      }\n    }\n\n    console.log('\\n\\n\\n\\n\\n\\nchange\\n\\n\\n\\n\\n\\n\\n\\n');\n    identify();\n  }, [synchronize, article_page, page]);\n  useEffect(() => {\n    identifyCallback();\n  }, [identifyCallback]);\n  useEffect(() => {\n    if (combine.indexOf(page) === -1) {\n      navigate('/access====>error');\n    } else if (article_page) {\n      if (personal_sidebar.indexOf(article_page) === -1) {\n        navigate('/access====>error');\n      } else if (article_page === '個人年度目標') {\n        navigate('/access====>error');\n      } else if (page === '組別變動' && article_page !== undefined) {\n        navigate('/access====>error');\n      }\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"head\",\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        sidebar_arr: admin_sidebar\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Sidebar, {\n        sidebar_arr: combine,\n        style: \"lesssmall\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Sidebar, {\n        sidebar_arr: combine,\n        style: \"small\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"body\",\n      children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n        sidebar_arr: combine,\n        style: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Article, {\n        data: data,\n        synchronize_update: synchronize_update,\n        synchronize: synchronize\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Admin, \"+N32rPEevSXiZ6iv/CjKH9X+ylU=\", false, function () {\n  return [useParams, useParams, useNavigate];\n});\n\n_c = Admin;\nexport default Admin;\n\nvar _c;\n\n$RefreshReg$(_c, \"Admin\");","map":{"version":3,"sources":["/Users/admin/Downloads/code/dajia/frontend/src/page/admin.js"],"names":["Article","Sidebar","Title","admin_sidebar","log_out","personal_sidebar","article_bar_arr","useParams","useNavigate","useCallback","useEffect","useState","useRef","Admin","synchronize","synchronize_update","page","article_page","navigate","combine","concat","data","set_data","identifyCallback","identify","value","JSON","parse","window","sessionStorage","getItem","length","obj","Object","values","map","item","push","console","log","indexOf","undefined"],"mappings":"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","sourcesContent":["import Article from \"./backend_component/article\";\nimport Sidebar from \"./backend_component/sidebar\";\nimport Title from \"./backend_component/title\";\nimport { admin_sidebar,log_out, personal_sidebar,article_bar_arr } from \"./api\";\nimport { useParams,useNavigate } from \"react-router-dom\";\nimport { useCallback, useEffect,useState } from \"react\";\nimport { useRef } from \"react\";\nconst Admin=()=>{\n    const [synchronize,synchronize_update]=useState(false)//設定同步頁面\n    const {page}=useParams()\n    const {article_page}=useParams()\n    const navigate=useNavigate()\n    const combine=admin_sidebar.concat(log_out)\n    const [data,set_data]=useState([]);\n\n    const identifyCallback=useCallback(()=>{\n        \n        function identify(){\n            var value\n            if(page!=='登出'){\n                if(article_page===article_bar_arr[1]){\n                    value=JSON.parse(window.sessionStorage.getItem('year_performance'))[page]\n                    set_data(value.length>0?value:[])\n                }\n                else if(article_page===article_bar_arr[2]){\n                    value=JSON.parse(window.sessionStorage.getItem('data'))[page]\n                    set_data(value.length>0?value:[])\n                }\n                else if(page==='主管'){\n                    \n                }\n                else if(page==='新增年度'){\n                    //新增年度\n                    value=[]\n                    var obj=JSON.parse(window.sessionStorage.getItem('banch_index'))\n                    Object.values(obj).map((item)=>{\n                        //物件轉陣列\n                        return item.map((item)=>{\n                            //二維陣列 to 一維陣列\n                            if(item[7]!=='off'&&item[6]!=='管理員'){\n                                value.push(item)\n                            }\n                            return value\n                        })\n                    })\n\n                    set_data(value.length>0?value:[])\n                }\n                else{\n                    //首頁 離職員工\n                    value=JSON.parse(window.sessionStorage.getItem('banch_index'))[page]\n                    set_data(value.length>0?value:[])\n                }\n            }\n\n        }\n        console.log('\\n\\n\\n\\n\\n\\nchange\\n\\n\\n\\n\\n\\n\\n\\n')\n        identify()\n    },[synchronize,article_page,page])\n\n    useEffect(()=>{\n        identifyCallback()\n    },[identifyCallback])\n\n    useEffect(() => {\n        if(combine.indexOf(page)===-1){\n            navigate('/access====>error')\n        }\n        else if(article_page){\n\n            if(personal_sidebar.indexOf(article_page)===-1){\n                navigate('/access====>error')\n            }\n            else if(article_page==='個人年度目標'){\n                navigate('/access====>error')\n            }\n            else if(page==='組別變動'&&article_page!==undefined){\n                navigate('/access====>error')\n            }\n\n        }\n    });\n    \n    return(\n    <>\n    <div className=\"head\">\n        <Title sidebar_arr={admin_sidebar}/>\n        <Sidebar sidebar_arr={combine} style={\"lesssmall\"} />\n        <Sidebar sidebar_arr={combine} style={\"small\"} />\n    </div>\n\n    <div className=\"body\">\n        <Sidebar sidebar_arr={combine} style={\"large\"}/>\n        <Article  data={data} synchronize_update={synchronize_update} synchronize={synchronize} />\n    </div>\n    </>\n    )\n}\nexport default Admin;"]},"metadata":{},"sourceType":"module"}