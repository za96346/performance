{"ast":null,"code":"import axios from \"axios\";\nimport { ip, socketEvent, socketNameSpace } from \"../config\";\nimport session from \"./method/storage\";\nimport SocketIO from \"./socketIo\";\nexport const config = {\n  url: `http://${ip}:5001/`,\n  urlYearPerformance: 'backend/year_performance',\n  urlBanchIndex: 'backend/banch_index',\n  urlBackEnd: 'backend',\n  urlInsertBanchTable: 'backend/InsertBanchTable',\n  urlInsertPerformanceTable: 'backend/InsertPerformanceTable',\n  urlUpdatePerformance: 'backend/UpdatePerformanceTable',\n  urlGroupChange: 'backend/GroupChange',\n  urlSelectAllBanch: 'backend/SelectAllBanch',\n  urlPerformanceBanchChange: 'backend/PerformanceBanchChange',\n  urlNewEmpInsertPerformanceTable: 'backend/NewEmpInsertPerformanceTable',\n  urlChangeBanchName: 'backend/ChangeBanchName'\n};\nexport const article_bar_arr = ['首頁', '年度考核分數', '每月考核績效'];\nexport const log_out = ['登出'];\nexport const personal_sidebar = ['每月考核績效', '年度考核分數'];\nexport function admin_sidebar() {\n  const admin_sidebar_orignal = ['組別管理', '總覽', '幹部', '離職員工', '新增年度'];\n  var banch = session.getItem('all_banch'); //console.log(banch)\n\n  if (banch === null || banch === undefined) {\n    return admin_sidebar_orignal;\n  }\n\n  for (let item = 0; item < banch.length; item++) {\n    admin_sidebar_orignal.splice(item + 2, 0, banch[item]);\n  } //console.log(admin_sidebar_orignal)\n\n\n  return admin_sidebar_orignal;\n}\nexport function manager_sidebar() {\n  var banch = session.getItem('banch');\n  const manager = [banch];\n  return manager;\n}\nexport const position_arr = ['', '管理員', '主管', '一般職員'];\nexport const fixed_title = ['id', '姓名', '年度目標', '年度', '月份', '態度', '效率', '專業', '績效獎金', '績效描述', '遲到', '不當請假', '分數'];\nexport const fixed_title_emp = ['id', '姓名', '組別', '帳號', '密碼', '入職日', '職位權限', '狀態'];\nexport function all_view(data) {\n  var temp = [];\n\n  for (let key in data) {\n    if (key !== '離職員工' && key !== '幹部') {\n      data[key].map((item, index) => {\n        temp.push(item);\n        return item;\n      });\n    }\n  }\n\n  return temp;\n}\nexport function select_emp_name_id(number) {\n  const emp_arr = [];\n\n  if (number === 1) {\n    for (let i = 0; i < 40; i++) {\n      emp_arr.push([i, 'name: ' + i, 'goal' + i, 'attitude', 'efficiency', 'professional', 2000 + i, 'directions' + i, i, 0, 0]);\n    }\n\n    return emp_arr;\n  } else if (number === 2) {\n    for (let i = 0; i < 40; i++) {\n      emp_arr.push([i, 'name: ' + i, 'goal' + i, 80 + i]);\n    }\n\n    return emp_arr;\n  } else {\n    for (let i = 0; i < 40; i++) {\n      emp_arr.push([i, 'name: ' + i]);\n    }\n\n    return emp_arr;\n  }\n}\nexport function select_route(navigate) {\n  var permession = session.getItem('permession');\n\n  if (permession === \"admin\") {\n    console.log('\\nRoute==>', permession);\n    navigate(`/backend/admin/${admin_sidebar()[0]}`); //跳過 組別管理\n  } else if (permession === \"manager\") {\n    console.log('\\nRoute==>', permession);\n    navigate(`/backend/manager/${manager_sidebar()[0]}`);\n  } else if (permession === 'personal') {\n    console.log('\\nRoute==>', permession);\n    navigate(`/backend/personal/${personal_sidebar[0]}`);\n  } else {\n    navigate('/');\n  }\n}\nexport async function change_banch_name(token, data) {\n  return await axios({\n    method: 'POST',\n    url: config.url + config.urlChangeBanchName,\n    data: JSON.stringify({\n      'data': data\n    }),\n    headers: {\n      'token': token,\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*'\n    }\n  }).then(response => {\n    console.log(response);\n    return response.data;\n  }).catch(error => {\n    console.log(error);\n    return false;\n  });\n}\nexport async function performance_banch_change(token, data) {\n  return await axios({\n    method: 'POST',\n    url: config.url + config.urlPerformanceBanchChange,\n    data: JSON.stringify({\n      'data': data\n    }),\n    headers: {\n      'token': token,\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*'\n    }\n  }).then(response => {\n    console.log(response);\n    return response.data;\n  }).catch(error => {\n    console.log(error);\n    return false;\n  });\n}\nexport async function group_change(token, data) {\n  return await axios({\n    method: 'POST',\n    url: config.url + config.urlGroupChange,\n    data: JSON.stringify({\n      'data': data\n    }),\n    headers: {\n      'token': token,\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*'\n    }\n  }).then(response => {\n    console.log(response);\n    return true;\n  }).catch(error => {\n    console.log(error);\n    return false;\n  });\n}\nexport async function updata_performance_table(data, token) {\n  return await axios({\n    method: 'POST',\n    url: config.url + config.urlUpdatePerformance,\n    data: JSON.stringify({\n      'data': data\n    }),\n    headers: {\n      'token': token,\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*'\n    }\n  }).then(response => {\n    console.log(response);\n    return true;\n  }).catch(error => {\n    console.log(error);\n    return false;\n  });\n}\n;\nexport async function new_emp_insert_performance_table(token, data) {\n  return await axios({\n    method: 'POST',\n    url: config.url + config.urlNewEmpInsertPerformanceTable,\n    data: JSON.stringify({\n      'data': data\n    }),\n    headers: {\n      'token': token,\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*'\n    }\n  }).then(response => {\n    console.log('NewEmpInsertPerformanceTable', response);\n    return response.data;\n  }).catch(error => {\n    console.log(error);\n    return error;\n  });\n}\nexport async function insert_performance_table(token, data) {\n  return await axios({\n    method: 'POST',\n    url: config.url + config.urlInsertPerformanceTable,\n    data: JSON.stringify({\n      'data': data\n    }),\n    headers: {\n      'token': token,\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*'\n    }\n  }).then(response => {\n    console.log('InsertPerformanceTable', response);\n    return response.data;\n  }).catch(error => {\n    console.log(error);\n    return error;\n  });\n}\nexport async function insert_banch_table(token, data) {\n  return await axios({\n    method: 'POST',\n    url: config.url + config.urlInsertBanchTable,\n    data: JSON.stringify({\n      'data': data\n    }),\n    headers: {\n      'token': token,\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*'\n    }\n  }).then(response => {\n    console.log('response data===>', response.data['data']);\n    return response.data['data']; //data=>insert or update\n    //insert=>tell you that this people is a new create.\n    //updata=>tell you that this people is exist.\n  }).catch(error => {\n    console.log(error);\n    return false;\n  });\n}\nexport async function backend(token) {\n  return await axios({\n    method: 'POST',\n    url: config.url + config.urlBackEnd,\n    headers: {\n      'token': token,\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*'\n    }\n  }).then(response => {\n    var data = response.data;\n    console.log('每月績效', data);\n    var result = all_view(data);\n    data['總覽'] = result;\n    session.setItem('data', JSON.stringify(data));\n    return true;\n  }).catch(error => {\n    console.log(error);\n    console.log('token error =>backend');\n    return false;\n  });\n}\nexport async function banch_index(token) {\n  return await axios({\n    method: 'POST',\n    url: config.url + config.urlBanchIndex,\n    headers: {\n      'token': token,\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*'\n    }\n  }).then(response => {\n    var data = response.data;\n    console.log('組員資料', data);\n    var result = all_view(data);\n    data['總覽'] = result;\n    window.sessionStorage.setItem('banch_index', JSON.stringify(data));\n    return true;\n  }).catch(error => {\n    console.log(error);\n    console.log('token error =>banch_index');\n    return false;\n  });\n}\nexport async function year_performance(token) {\n  return await axios({\n    method: 'POST',\n    url: config.url + config.urlYearPerformance,\n    headers: {\n      'token': token,\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*'\n    }\n  }).then(response => {\n    var data = response.data;\n    var result = all_view(data);\n    data['總覽'] = result;\n    console.log('年度績效', data);\n    window.sessionStorage.setItem('year_performance', JSON.stringify(data));\n    return true;\n  }).catch(error => {\n    console.log(error);\n    console.log('token error =>year_performance');\n    return false;\n  });\n}\nexport async function select_all_banch(token) {\n  return await axios({\n    method: 'POST',\n    url: config.url + config.urlSelectAllBanch,\n    headers: {\n      'token': token,\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*'\n    }\n  }).then(response => {\n    var data = response.data;\n    console.log('所有組別', data);\n    window.sessionStorage.setItem('all_banch', JSON.stringify(data));\n    return true;\n  }).catch(error => {\n    console.log(error);\n    console.log('token error =>select_all_banch');\n    return false;\n  });\n}\nexport async function login(login_data) {\n  return await axios({\n    method: 'POST',\n    url: config.url,\n    data: JSON.stringify({\n      'account': login_data.account,\n      'password': login_data.password\n    }),\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*'\n    }\n  }).then(response => {\n    var data = response.data;\n    window.sessionStorage.setItem('token', data.token);\n    window.sessionStorage.setItem('user_name', data.user_name);\n    window.sessionStorage.setItem('banch', data.banch);\n    window.sessionStorage.setItem('permession', data.permession);\n    SocketIO.action(socketEvent.DataBaseChange, {}, socketNameSpace.main);\n    return true;\n  }).catch(error => {\n    console.log(error);\n    alert('帳號或密碼輸入錯誤');\n    return false;\n  });\n}","map":{"version":3,"sources":["/Users/siou/Downloads/code/performance/frontend_dev/src/page/api.js"],"names":["axios","ip","socketEvent","socketNameSpace","session","SocketIO","config","url","urlYearPerformance","urlBanchIndex","urlBackEnd","urlInsertBanchTable","urlInsertPerformanceTable","urlUpdatePerformance","urlGroupChange","urlSelectAllBanch","urlPerformanceBanchChange","urlNewEmpInsertPerformanceTable","urlChangeBanchName","article_bar_arr","log_out","personal_sidebar","admin_sidebar","admin_sidebar_orignal","banch","getItem","undefined","item","length","splice","manager_sidebar","manager","position_arr","fixed_title","fixed_title_emp","all_view","data","temp","key","map","index","push","select_emp_name_id","number","emp_arr","i","select_route","navigate","permession","console","log","change_banch_name","token","method","JSON","stringify","headers","then","response","catch","error","performance_banch_change","group_change","updata_performance_table","new_emp_insert_performance_table","insert_performance_table","insert_banch_table","backend","result","setItem","banch_index","window","sessionStorage","year_performance","select_all_banch","login","login_data","account","password","user_name","action","DataBaseChange","main","alert"],"mappings":"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","sourcesContent":["import axios from \"axios\"\nimport { ip, socketEvent, socketNameSpace } from \"../config\";\nimport session from \"./method/storage\";\nimport SocketIO from \"./socketIo\";\nexport const config = {\n    url: `http://${ip}:5001/`,\n    urlYearPerformance: 'backend/year_performance',\n    urlBanchIndex: 'backend/banch_index',\n    urlBackEnd: 'backend',\n    urlInsertBanchTable: 'backend/InsertBanchTable',\n    urlInsertPerformanceTable: 'backend/InsertPerformanceTable',\n    urlUpdatePerformance: 'backend/UpdatePerformanceTable',\n    urlGroupChange: 'backend/GroupChange',\n    urlSelectAllBanch: 'backend/SelectAllBanch',\n    urlPerformanceBanchChange: 'backend/PerformanceBanchChange',\n    urlNewEmpInsertPerformanceTable: 'backend/NewEmpInsertPerformanceTable',\n    urlChangeBanchName: 'backend/ChangeBanchName'\n};\nexport const article_bar_arr = ['首頁', '年度考核分數', '每月考核績效']\nexport const log_out = ['登出']\nexport const personal_sidebar = ['每月考核績效', '年度考核分數'];\n\nexport function admin_sidebar() {\n    const admin_sidebar_orignal = ['組別管理', '總覽', '幹部', '離職員工', '新增年度'];\n    var banch = session.getItem('all_banch')\n    //console.log(banch)\n    if (banch === null || banch === undefined) {\n        return admin_sidebar_orignal\n    }\n    for (let item = 0; item < banch.length; item++) {\n        admin_sidebar_orignal.splice(item + 2, 0, banch[item])\n    }\n    //console.log(admin_sidebar_orignal)\n    return admin_sidebar_orignal\n\n}\nexport function manager_sidebar() {\n    var banch = session.getItem('banch')\n    const manager = [banch];\n    return manager\n}\n\nexport const position_arr = ['', '管理員', '主管', '一般職員']\nexport const fixed_title = ['id', '姓名', '年度目標', '年度', '月份', '態度', '效率', '專業', '績效獎金', '績效描述', '遲到', '不當請假', '分數']\nexport const fixed_title_emp = ['id', '姓名', '組別', '帳號', '密碼', '入職日', '職位權限', '狀態']\n\n\nexport function all_view(data) {\n    var temp = []\n\n    for (let key in data) {\n        if (key !== '離職員工' && key !== '幹部') {\n            data[key].map((item, index) => {\n                temp.push(item)\n                return item\n            })\n        }\n    }\n    return temp\n}\n\n\n\n\nexport function select_emp_name_id(number) {\n\n    const emp_arr = []\n    if (number === 1) {\n        for (let i = 0; i < 40; i++) {\n            emp_arr.push([i, 'name: ' + i, 'goal' + i, 'attitude', 'efficiency', 'professional', 2000 + i, 'directions' + i, i, 0, 0])\n        }\n        return (emp_arr)\n    }\n    else if (number === 2) {\n        for (let i = 0; i < 40; i++) {\n            emp_arr.push([i, 'name: ' + i, 'goal' + i, 80 + i])\n        }\n        return (emp_arr)\n\n    }\n    else {\n        for (let i = 0; i < 40; i++) {\n            emp_arr.push([i, 'name: ' + i])\n        }\n        return (emp_arr)\n    }\n\n\n\n}\n\nexport function select_route(navigate) {\n\n    var permession = session.getItem('permession')\n    if (permession === \"admin\") {\n        console.log('\\nRoute==>', permession)\n        navigate(`/backend/admin/${admin_sidebar()[0]}`)//跳過 組別管理\n    }\n    else if (permession === \"manager\") {\n        console.log('\\nRoute==>', permession)\n        navigate(`/backend/manager/${manager_sidebar()[0]}`)\n    }\n    else if (permession === 'personal') {\n        console.log('\\nRoute==>', permession)\n        navigate(`/backend/personal/${personal_sidebar[0]}`)\n    }\n    else { navigate('/') }\n}\n\n\nexport async function change_banch_name(token, data) {\n    return await axios({\n        method: 'POST',\n        url: config.url + config.urlChangeBanchName,\n        data: JSON.stringify({\n            'data': data\n        }),\n        headers: {\n            'token': token,\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*'\n        }\n    }).then((response) => {\n        console.log(response)\n        return response.data\n    }).catch((error) => {\n        console.log(error)\n        return false\n    })\n}\n\nexport async function performance_banch_change(token, data) {\n    return await axios({\n        method: 'POST',\n        url: config.url + config.urlPerformanceBanchChange,\n        data: JSON.stringify({\n            'data': data\n        }),\n        headers: {\n            'token': token,\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*'\n        }\n    }).then((response) => {\n        console.log(response)\n        return response.data\n    }).catch((error) => {\n        console.log(error)\n        return false\n    })\n}\n\n\nexport async function group_change(token, data) {\n    return await axios({\n        method: 'POST',\n        url: config.url + config.urlGroupChange,\n        data: JSON.stringify({\n            'data': data\n        }),\n        headers: {\n            'token': token,\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*'\n        }\n    }).then((response) => {\n        console.log(response)\n        return true\n    }).catch((error) => {\n        console.log(error)\n        return false\n    })\n}\n\nexport async function updata_performance_table(data, token) {\n    return await axios({\n        method: 'POST',\n        url: config.url + config.urlUpdatePerformance,\n        data: JSON.stringify({\n            'data': data\n        }),\n        headers: {\n            'token': token,\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*'\n        }\n    }).then((response) => {\n        console.log(response)\n        return true\n    }).catch((error) => {\n        console.log(error)\n        return false\n    })\n};\n\nexport async function new_emp_insert_performance_table(token, data) {\n    return await axios({\n        method: 'POST',\n        url: config.url + config.urlNewEmpInsertPerformanceTable,\n        data: JSON.stringify({\n            'data': data\n        }),\n        headers: {\n            'token': token,\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*'\n        }\n\n    }).then((response) => {\n        console.log('NewEmpInsertPerformanceTable', response)\n        return response.data\n    }).catch((error) => {\n        console.log(error)\n        return error\n    })\n}\n\nexport async function insert_performance_table(token, data) {\n    return await axios({\n        method: 'POST',\n        url: config.url + config.urlInsertPerformanceTable,\n        data: JSON.stringify({\n            'data': data\n        }),\n        headers: {\n            'token': token,\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*'\n        }\n\n    }).then((response) => {\n        console.log('InsertPerformanceTable', response)\n        return response.data\n    }).catch((error) => {\n        console.log(error)\n        return error\n    })\n}\n\nexport async function insert_banch_table(token, data) {\n\n    return await axios({\n        method: 'POST',\n        url: config.url + config.urlInsertBanchTable,\n        data: JSON.stringify({\n            'data': data,\n        }),\n        headers: {\n            'token': token,\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*'\n        }\n    }).then((response) => {\n        console.log('response data===>', response.data['data'])\n        return response.data['data']//data=>insert or update\n        //insert=>tell you that this people is a new create.\n        //updata=>tell you that this people is exist.\n    }).catch((error) => {\n        console.log(error)\n\n        return false\n    })\n}\n\n\nexport async function backend(token) {\n    return await axios({\n        method: 'POST',\n        url: config.url + config.urlBackEnd,\n        headers: {\n            'token': token,\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*'\n        }\n    }).then((response) => {\n        var data = response.data\n        console.log('每月績效', data)\n        var result = all_view(data)\n        data['總覽'] = result\n        session.setItem('data', JSON.stringify(data))\n        return true\n\n    }).catch((error) => {\n\n        console.log(error)\n        console.log('token error =>backend')\n        return false\n\n    })\n}\n\nexport async function banch_index(token) {\n    return await axios({\n        method: 'POST',\n        url: config.url + config.urlBanchIndex,\n        headers: {\n            'token': token,\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*'\n        }\n    }).then((response) => {\n        var data = response.data\n        console.log('組員資料', data)\n        var result = all_view(data)\n\n        data['總覽'] = result\n        window.sessionStorage.setItem('banch_index', JSON.stringify(data))\n        return true\n    }).catch((error) => {\n        console.log(error)\n        console.log('token error =>banch_index')\n        return false\n    })\n}\n\nexport async function year_performance(token) {\n    return await axios({\n        method: 'POST',\n        url: config.url + config.urlYearPerformance,\n        headers: {\n            'token': token,\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*'\n        }\n    }).then((response) => {\n        var data = response.data\n        var result = all_view(data)\n        data['總覽'] = result\n        console.log('年度績效', data)\n        window.sessionStorage.setItem('year_performance', JSON.stringify(data))\n\n        return true\n    }).catch((error) => {\n        console.log(error)\n        console.log('token error =>year_performance')\n        return false\n    })\n}\n\nexport async function select_all_banch(token) {\n    return await axios({\n        method: 'POST',\n        url: config.url + config.urlSelectAllBanch,\n        headers: {\n            'token': token,\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*'\n        }\n    }).then((response) => {\n        var data = response.data\n        console.log('所有組別', data)\n        window.sessionStorage.setItem('all_banch', JSON.stringify(data))\n        return true\n    }).catch((error) => {\n        console.log(error)\n        console.log('token error =>select_all_banch')\n        return false\n    })\n}\n\n\nexport async function login(login_data) {\n    return await axios({\n        method: 'POST',\n        url: config.url,\n        data: JSON.stringify({\n            'account': login_data.account,\n            'password': login_data.password\n        }),\n        headers: {\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*'\n        }\n    }).then((response) => {\n        var data = response.data\n\n        window.sessionStorage.setItem('token', data.token)\n        window.sessionStorage.setItem('user_name', data.user_name)\n        window.sessionStorage.setItem('banch', data.banch)\n        window.sessionStorage.setItem('permession', data.permession)\n        SocketIO.action(socketEvent.DataBaseChange, {}, socketNameSpace.main)\n        return true\n\n    }).catch((error) => {\n        console.log(error)\n        alert('帳號或密碼輸入錯誤')\n        return false\n\n    })\n}\n"]},"metadata":{},"sourceType":"module"}