{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/admin/Downloads/code/dajia/frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _slicedToArray from\"/Users/admin/Downloads/code/dajia/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Article from\"./backend_component/article\";import Sidebar from\"./backend_component/sidebar\";import Title from\"./backend_component/title\";import{admin_sidebar,log_out,personal_sidebar,article_bar_arr}from\"./api\";import{useParams,useNavigate}from\"react-router-dom\";import{useCallback,useEffect,useState}from\"react\";import{useRef}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Admin=function Admin(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),synchronize=_useState2[0],synchronize_update=_useState2[1];//設定同步頁面\nvar _useParams=useParams(),page=_useParams.page;var _useParams2=useParams(),article_page=_useParams2.article_page;var navigate=useNavigate();var combine=admin_sidebar().concat(log_out);var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],set_data=_useState4[1];var identifyCallback=useCallback(function(){function identify(){var value=[];var temp=[];var state=false;if(page!=='登出'){set_data([]);if(article_page===article_bar_arr[1]){//年度\nif(page==='總覽'){var a=JSON.parse(window.sessionStorage.getItem('year_performance'))[page];var _iterator=_createForOfIteratorHelper(a),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var a_item=_step.value;state=false;var _iterator2=_createForOfIteratorHelper(temp),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var temp_item=_step2.value;if(temp_item[5]===a_item[5]&&temp_item[3]===a_item[3]){state=true;temp_item[4]=Math.round((temp_item[4]+a_item[4])*10)/10;break;}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}if(state===false){temp.push(a_item);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}value=temp;set_data(value.length>0?value:[]);}else{value=JSON.parse(window.sessionStorage.getItem('year_performance'))[page];console.log('年度資料',value);}set_data(value.length>0?value:[]);}else if(article_page===article_bar_arr[2]){//每月\nvalue=JSON.parse(window.sessionStorage.getItem('data'))[page];console.log('每月資料',value);set_data(value.length>0?value:[]);}else if(page==='新增年度'){//新增年度\nvalue=[];var obj=JSON.parse(window.sessionStorage.getItem('banch_index'));for(var key in obj){var items=obj[key];if(key!=='離職員工'&&key!=='幹部'&&key!=='總覽'){for(var i=0;i<items.length;i++){if(items[i][6]!=='管理員'){value.push(items[i]);}}}}console.log('新增年度',value.length);set_data(value.length>0?value:[]);}else if(page==='組別管理'){value=JSON.parse(window.sessionStorage.getItem('all_banch'));console.log('group_change',value);set_data(value.length>0?value:[]);}else{//首頁 離職員工\nvalue=JSON.parse(window.sessionStorage.getItem('banch_index'))[page];console.log('首頁 離職員工資料',value,page);set_data(value.length>0?value:[]);}}}console.log('\\n\\n\\n\\n\\n\\nchange\\n\\n\\n\\n\\n\\n\\n\\n');identify();},[synchronize,article_page,page]);useEffect(function(){identifyCallback();},[identifyCallback]);useEffect(function(){if(combine.indexOf(page)===-1){navigate('/access====>error');}else if(article_page){if(personal_sidebar.indexOf(article_page)===-1){navigate('/access====>error');}else if(article_page==='個人年度目標'){navigate('/access====>error');}else if(page==='組別變動'&&article_page!==undefined){navigate('/access====>error');}}});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"head\",children:[/*#__PURE__*/_jsx(Title,{sidebar_arr:admin_sidebar()}),/*#__PURE__*/_jsx(Sidebar,{sidebar_arr:combine,style:\"lesssmall\"}),/*#__PURE__*/_jsx(Sidebar,{sidebar_arr:combine,style:\"small\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"body\",children:[/*#__PURE__*/_jsx(Sidebar,{sidebar_arr:combine,style:\"large\"}),/*#__PURE__*/_jsx(Article,{data:data,synchronize_update:synchronize_update,synchronize:synchronize})]})]});};export default Admin;","map":{"version":3,"sources":["/Users/admin/Downloads/code/dajia/frontend/src/page/admin.js"],"names":["Article","Sidebar","Title","admin_sidebar","log_out","personal_sidebar","article_bar_arr","useParams","useNavigate","useCallback","useEffect","useState","useRef","Admin","synchronize","synchronize_update","page","article_page","navigate","combine","concat","data","set_data","identifyCallback","identify","value","temp","state","a","JSON","parse","window","sessionStorage","getItem","a_item","temp_item","Math","round","push","length","console","log","obj","key","items","i","indexOf","undefined"],"mappings":"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","sourcesContent":["import Article from \"./backend_component/article\";\nimport Sidebar from \"./backend_component/sidebar\";\nimport Title from \"./backend_component/title\";\nimport { admin_sidebar, log_out, personal_sidebar, article_bar_arr } from \"./api\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { useRef } from \"react\";\nconst Admin = () => {\n    const [synchronize, synchronize_update] = useState(false)//設定同步頁面\n    const { page } = useParams()\n    const { article_page } = useParams()\n    const navigate = useNavigate()\n    const combine = admin_sidebar().concat(log_out)\n    const [data, set_data] = useState([]);\n\n    const identifyCallback = useCallback(() => {\n\n        function identify() {\n            var value = []\n            var temp=[]\n            var state=false\n            if (page !== '登出') {\n                set_data([])\n                if (article_page === article_bar_arr[1]) {\n                    //年度\n                    if(page==='總覽'){\n                        var a=JSON.parse(window.sessionStorage.getItem('year_performance'))[page]\n                        for(let a_item of a){\n                            state =false\n                            for(let temp_item of temp){\n                                if(temp_item[5]===a_item[5]&&temp_item[3]===a_item[3]){\n                                    state=true\n                                    temp_item[4]=Math.round((temp_item[4]+a_item[4])*10)/10\n                                    break\n                                }\n                            }\n                            if(state===false){\n                                temp.push(a_item)\n                            }\n                        }\n                        value=temp\n                        set_data(value.length>0?value:[])\n                    }\n                    else{\n                        value = JSON.parse(window.sessionStorage.getItem('year_performance'))[page]\n                        console.log('年度資料',value)    \n                    }\n\n                    set_data(value.length > 0 ? value : [])\n                }\n                else if (article_page === article_bar_arr[2]) {\n                    //每月\n                    value = JSON.parse(window.sessionStorage.getItem('data'))[page]\n                    console.log('每月資料',value)\n                    set_data(value.length > 0 ? value : [])\n                }\n                \n                else if (page === '新增年度') {\n                    //新增年度\n                    value = []\n                    var obj = JSON.parse(window.sessionStorage.getItem('banch_index'))\n\n                    for(let key in obj){\n                        var items=obj[key]\n                        if(key!=='離職員工'&&key!=='幹部'&&key!=='總覽'){\n                            for(let i=0;i<items.length;i++){\n                                if(items[i][6]!=='管理員'){\n                                    value.push(items[i])\n                                }\n                            }\n                        }\n                    }\n\n                    console.log('新增年度',value.length)\n                    set_data(value.length > 0 ? value : [])\n                }\n                else if(page==='組別管理'){\n                    value=JSON.parse(window.sessionStorage.getItem('all_banch'))\n                    console.log('group_change',value)\n                    set_data(value.length > 0 ? value : [])\n                }\n                else {\n                    //首頁 離職員工\n                    \n                    value = JSON.parse(window.sessionStorage.getItem('banch_index'))[page]\n                    console.log('首頁 離職員工資料',value,page)\n                    set_data(value.length > 0 ? value : [])\n                }\n            }\n\n        }\n        console.log('\\n\\n\\n\\n\\n\\nchange\\n\\n\\n\\n\\n\\n\\n\\n')\n        identify()\n    }, [synchronize, article_page, page])\n\n    useEffect(() => {\n        identifyCallback()\n    }, [identifyCallback])\n\n    useEffect(() => {\n        if (combine.indexOf(page) === -1) {\n            navigate('/access====>error')\n        }\n        else if (article_page) {\n\n            if (personal_sidebar.indexOf(article_page) === -1) {\n                navigate('/access====>error')\n            }\n            else if (article_page === '個人年度目標') {\n                navigate('/access====>error')\n            }\n            else if (page === '組別變動' && article_page !== undefined) {\n                navigate('/access====>error')\n            }\n\n        }\n    });\n\n    return (\n        <>\n            <div className=\"head\">\n                <Title sidebar_arr={admin_sidebar()} />\n                <Sidebar sidebar_arr={combine} style={\"lesssmall\"} />\n                <Sidebar sidebar_arr={combine} style={\"small\"} />\n            </div>\n\n            <div className=\"body\">\n                <Sidebar sidebar_arr={combine} style={\"large\"} />\n                <Article data={data} synchronize_update={synchronize_update} synchronize={synchronize} />\n            </div>\n        </>\n    )\n}\nexport default Admin;"]},"metadata":{},"sourceType":"module"}