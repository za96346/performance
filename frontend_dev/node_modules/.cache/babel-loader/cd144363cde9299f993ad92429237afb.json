{"ast":null,"code":"import _slicedToArray from\"/Users/admin/Downloads/code/dajia/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Article from\"./backend_component/article\";import Sidebar from\"./backend_component/sidebar\";import Title from\"./backend_component/title\";import{admin_sidebar,log_out,personal_sidebar,article_bar_arr}from\"./api\";import{useParams,useNavigate}from\"react-router-dom\";import{useCallback,useEffect,useState}from\"react\";import{useRef}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Admin=function Admin(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),synchronize=_useState2[0],synchronize_update=_useState2[1];//設定同步頁面\nvar _useParams=useParams(),page=_useParams.page;var _useParams2=useParams(),article_page=_useParams2.article_page;var navigate=useNavigate();var combine=admin_sidebar.concat(log_out);var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],set_data=_useState4[1];var identifyCallback=useCallback(function(){function identify(){var value;if(page!=='登出'){if(article_page===article_bar_arr[1]){value=JSON.parse(window.sessionStorage.getItem('year_performance'))[page];set_data(value.length>0?value:[]);}else if(article_page===article_bar_arr[2]){value=JSON.parse(window.sessionStorage.getItem('data'))[page];set_data(value.length>0?value:[]);}else if(page==='新增年度'){//新增年度\nvalue=[];var obj=JSON.parse(window.sessionStorage.getItem('banch_index'));Object.values(obj).map(function(item){//物件轉陣列\nreturn item.map(function(item){//二維陣列 to 一維陣列\nif(item[7]!=='off'&&item[6]!=='管理員'){value.push(item);}return value;});});set_data(value.length>0?value:[]);}else if(page==='組別變動'){//組別變動\nset_data([]);}else{//首頁 離職員工\nvalue=JSON.parse(window.sessionStorage.getItem('banch_index'))[page];set_data(value.length>0?value:[]);}}}console.log('\\n\\n\\n\\n\\n\\nchange\\n\\n\\n\\n\\n\\n\\n\\n');identify();},[synchronize,article_page,page]);useEffect(function(){identifyCallback();},[identifyCallback]);useEffect(function(){if(combine.indexOf(page)===-1){navigate('/access====>error');}else if(article_page){if(personal_sidebar.indexOf(article_page)===-1){navigate('/access====>error');}else if(article_page==='個人年度目標'){navigate('/access====>error');}else if(page==='組別變動'&&article_page!==undefined){navigate('/access====>error');}}});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"head\",children:[/*#__PURE__*/_jsx(Title,{sidebar_arr:admin_sidebar}),/*#__PURE__*/_jsx(Sidebar,{sidebar_arr:combine,style:\"lesssmall\"}),/*#__PURE__*/_jsx(Sidebar,{sidebar_arr:combine,style:\"small\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"body\",children:[/*#__PURE__*/_jsx(Sidebar,{sidebar_arr:combine,style:\"large\"}),/*#__PURE__*/_jsx(Article,{data:data,synchronize_update:synchronize_update,synchronize:synchronize})]})]});};export default Admin;","map":{"version":3,"sources":["/Users/admin/Downloads/code/dajia/frontend/src/page/admin.js"],"names":["Article","Sidebar","Title","admin_sidebar","log_out","personal_sidebar","article_bar_arr","useParams","useNavigate","useCallback","useEffect","useState","useRef","Admin","synchronize","synchronize_update","page","article_page","navigate","combine","concat","data","set_data","identifyCallback","identify","value","JSON","parse","window","sessionStorage","getItem","length","obj","Object","values","map","item","push","console","log","indexOf","undefined"],"mappings":"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","sourcesContent":["import Article from \"./backend_component/article\";\nimport Sidebar from \"./backend_component/sidebar\";\nimport Title from \"./backend_component/title\";\nimport { admin_sidebar,log_out, personal_sidebar,article_bar_arr } from \"./api\";\nimport { useParams,useNavigate } from \"react-router-dom\";\nimport { useCallback, useEffect,useState } from \"react\";\nimport { useRef } from \"react\";\nconst Admin=()=>{\n    const [synchronize,synchronize_update]=useState(false)//設定同步頁面\n    const {page}=useParams()\n    const {article_page}=useParams()\n    const navigate=useNavigate()\n    const combine=admin_sidebar.concat(log_out)\n    const [data,set_data]=useState([]);\n\n    const identifyCallback=useCallback(()=>{\n        \n        function identify(){\n            var value\n            if(page!=='登出'){\n                if(article_page===article_bar_arr[1]){\n                    value=JSON.parse(window.sessionStorage.getItem('year_performance'))[page]\n                    set_data(value.length>0?value:[])\n                }\n                else if(article_page===article_bar_arr[2]){\n                    value=JSON.parse(window.sessionStorage.getItem('data'))[page]\n                    set_data(value.length>0?value:[])\n                }\n                else if(page==='新增年度'){\n                    //新增年度\n                    value=[]\n                    var obj=JSON.parse(window.sessionStorage.getItem('banch_index'))\n                    Object.values(obj).map((item)=>{\n                        //物件轉陣列\n                        return item.map((item)=>{\n                            //二維陣列 to 一維陣列\n                            if(item[7]!=='off'&&item[6]!=='管理員'){\n                                value.push(item)\n                            }\n                            return value\n                        })\n                    })\n\n                    set_data(value.length>0?value:[])\n                }\n                else if(page==='組別變動'){\n                    //組別變動\n                    set_data([])\n                }\n                else{\n                    //首頁 離職員工\n                    value=JSON.parse(window.sessionStorage.getItem('banch_index'))[page]\n                    set_data(value.length>0?value:[])\n                }\n            }\n\n        }\n        console.log('\\n\\n\\n\\n\\n\\nchange\\n\\n\\n\\n\\n\\n\\n\\n')\n        identify()\n    },[synchronize,article_page,page])\n\n    useEffect(()=>{\n        identifyCallback()\n    },[identifyCallback])\n\n    useEffect(() => {\n        if(combine.indexOf(page)===-1){\n            navigate('/access====>error')\n        }\n        else if(article_page){\n\n            if(personal_sidebar.indexOf(article_page)===-1){\n                navigate('/access====>error')\n            }\n            else if(article_page==='個人年度目標'){\n                navigate('/access====>error')\n            }\n            else if(page==='組別變動'&&article_page!==undefined){\n                navigate('/access====>error')\n            }\n\n        }\n    });\n    \n    return(\n    <>\n    <div className=\"head\">\n        <Title sidebar_arr={admin_sidebar}/>\n        <Sidebar sidebar_arr={combine} style={\"lesssmall\"} />\n        <Sidebar sidebar_arr={combine} style={\"small\"} />\n    </div>\n\n    <div className=\"body\">\n        <Sidebar sidebar_arr={combine} style={\"large\"}/>\n        <Article  data={data} synchronize_update={synchronize_update} synchronize={synchronize} />\n    </div>\n    </>\n    )\n}\nexport default Admin;"]},"metadata":{},"sourceType":"module"}