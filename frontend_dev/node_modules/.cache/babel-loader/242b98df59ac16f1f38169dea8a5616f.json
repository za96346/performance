{"ast":null,"code":"import axios from \"axios\";\nimport { Route } from \"react-router-dom\";\nimport Backend from \"./backend\";\nexport const config = {\n  url: 'http://localhost:5000/'\n};\nexport const log_out = ['登出'];\nexport const personal_sidebar = ['個人年度目標', '每月考核績效', '年度考核分數', '登出'];\nexport const admin_sidebar = ['保育組', '公關組', '社工組'];\nexport function manager_sidebar() {\n  var banch = window.sessionStorage.getItem('banch');\n  const manager = [banch, '登出'];\n  return manager;\n}\nexport function select_route(navigate) {\n  var permession = window.sessionStorage.getItem('permession');\n\n  if (permession === \"admin\") {\n    navigate(`/backend/admin/${admin_sidebar[0]}`);\n  } else if (permession === \"manager\") {\n    console.log(\"manager_siderbar()\", manager_sidebar());\n    navigate(`/backend/manager/${manager_sidebar()[0]}`);\n  } else if (permession === 'personal') {\n    console.log();\n    navigate(`/backend/personal/${personal_sidebar[0]}`);\n  } else {\n    navigate('/api==>error38**#039((@');\n  }\n}\nexport async function login(login_data, navigate, set_index_state) {\n  await axios({\n    method: 'POST',\n    url: config.url,\n    data: {\n      'account': login_data.account,\n      'password': login_data.password\n    },\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*'\n    }\n  }).then(response => {\n    var data = response.data;\n    console.log(data);\n    window.sessionStorage.setItem('token', data.token);\n    window.sessionStorage.setItem('user_name', data.user_name);\n    window.sessionStorage.setItem('banch', data.banch);\n    window.sessionStorage.setItem('permession', data.permession);\n    console.log(set_index_state);\n    select_route(navigate);\n    return true;\n  }).catch(error => {\n    console.log(error);\n    alert('帳號或密碼輸入錯誤');\n    return false;\n  });\n}","map":{"version":3,"sources":["/Users/admin/Downloads/code/dajia/frontend/src/page/api.js"],"names":["axios","Route","Backend","config","url","log_out","personal_sidebar","admin_sidebar","manager_sidebar","banch","window","sessionStorage","getItem","manager","select_route","navigate","permession","console","log","login","login_data","set_index_state","method","data","account","password","headers","then","response","setItem","token","user_name","catch","error","alert"],"mappings":"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","sourcesContent":["import axios from \"axios\"\nimport { Route } from \"react-router-dom\";\nimport Backend from \"./backend\";\nexport const config={\n    url:'http://localhost:5000/'\n};\nexport const log_out=['登出']\nexport const personal_sidebar=['個人年度目標','每月考核績效','年度考核分數','登出'];\nexport const admin_sidebar=['保育組','公關組','社工組'];\nexport function manager_sidebar(){\n    var banch=window.sessionStorage.getItem('banch');\n    const manager= [banch,'登出'];\n    return manager\n}\n\nexport function select_route(navigate){\n\n    var permession=window.sessionStorage.getItem('permession')\n    if(permession===\"admin\"){\n\n      navigate(`/backend/admin/${admin_sidebar[0]}`)\n    }\n    else if(permession===\"manager\"){\n        console.log(\"manager_siderbar()\",manager_sidebar())\n        navigate(`/backend/manager/${manager_sidebar()[0]}`)\n    }\n    else if(permession==='personal'){\n        console.log()\n        navigate(`/backend/personal/${personal_sidebar[0]}`)\n    }\n    else{navigate('/api==>error38**#039((@')}\n  }\n\n\nexport async function login(login_data,navigate,set_index_state){\n    await axios({\n        method:'POST',\n        url:config.url,\n        data:{\n            'account':login_data.account,\n            'password':login_data.password\n        },\n        headers:{\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin':'*'\n        }\n    }).then((response)=>{\n        var data=response.data\n        console.log(data)\n        window.sessionStorage.setItem('token',data.token)\n        window.sessionStorage.setItem('user_name',data.user_name)\n        window.sessionStorage.setItem('banch',data.banch)\n        window.sessionStorage.setItem('permession',data.permession)\n        console.log(set_index_state)\n        select_route(navigate)\n        return true\n\n    }).catch((error)=>{\n        console.log(error)\n        alert('帳號或密碼輸入錯誤')\n        return false\n        \n    })\n}"]},"metadata":{},"sourceType":"module"}